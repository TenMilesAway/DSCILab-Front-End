# æ¥å£ä¸€è§ˆï¼ˆå‰ç«¯æ¥å…¥ç‰ˆï¼‰

è¯´æ˜
- æœ¬æ¸…å•èšç„¦â€œç”¨æˆ·ç®¡ç† + æˆæœç®¡ç†â€ç›¸å…³æ¥å£ï¼ŒæŒ‰å‰ç«¯è§†è§’æ¢³ç†ï¼šè·¯å¾„ã€æ–¹æ³•ã€æƒé™ã€å­—æ®µè¯´æ˜ï¼ˆä¸­è‹±å¯¹ç…§ï¼‰ã€è¿”å›ä½“ä¸ç¤ºä¾‹
- ä¸ã€Šå®éªŒå®¤ä¿¡æ¯ç®¡ç†ç³»ç»Ÿæ¥å£æ–‡æ¡£.mdã€‹ä¿æŒä¸€è‡´ï¼Œä½†æ›´ç®€æ˜ç›´è§‚ï¼Œä¾¿äºå‰ç«¯æŸ¥æ‰¾ä¸å¯¹æ¥
- é‰´æƒï¼šé™¤å…¬å¼€æ¥å£å¤–ï¼Œå‡éœ€åœ¨ Header æºå¸¦ Authorization: Bearer <token>

ç›®å½•
- 1. ç”¨æˆ·ï¼ˆUsersï¼‰
- 2. æˆæœç®¡ç†ï¼ˆAchievements, Admin/Owner/FirstAuthorï¼‰
- 3. æˆ‘çš„æˆæœï¼ˆMy Achievementsï¼‰
- 4. æˆæœä½œè€…ï¼ˆAuthorsï¼‰
- 5. æˆæœç±»å‹ç®¡ç†ï¼ˆAchievement Categoriesï¼‰
- 6. å­—å…¸ï¼ˆDictionaries, Publicï¼‰
- 7. å…¬å¼€æ¥å£ï¼ˆPublic APIsï¼‰
- 8. å®éªŒå®¤ç”¨æˆ·ç®¡ç†ï¼ˆLab User Managementï¼‰
- 9. å¸ˆç”Ÿå…³ç³»ç®¡ç†ï¼ˆTeacher-Student Relationshipï¼‰
- 10. Postman Collection

---

## 1. ç”¨æˆ·ï¼ˆUsersï¼‰

å¤‡æ³¨ï¼šä»…åˆ—å‡ºå¯¹æˆæœç®¡ç†æœ‰ç›´æ¥å¸®åŠ©çš„æŸ¥è¯¢/æ£€ç´¢æ¥å£ï¼›å®é™…ç³»ç»Ÿä¸­è¿˜æœ‰ç™»å½•ã€æ³¨å†Œã€æƒé™ç­‰æ¥å£ï¼Œæ­¤å¤„ä»ç•¥ã€‚

1.1 æ¨¡ç³Šæ£€ç´¢å®éªŒå®¤ç”¨æˆ·ï¼ˆä¾›å‰ç«¯é€‰äººç”¨ï¼‰
- GET /lab/users/search?keyword=
- æƒé™ï¼šå·²ç™»å½•ï¼ˆå»ºè®®ï¼›è‹¥ä½¿ç”¨ /lab/users/crud/search åˆ™æ— éœ€ç™»å½•ï¼‰
- è¯·æ±‚å‚æ•°ï¼ˆQueryï¼‰
  - keyword (string): å…³é”®è¯ï¼ŒåŒ¹é… username/real_name/english_name/email/phone
- è¿”å›ï¼šList<LabUserProfileDTO>ï¼ˆåŒ…å« email/phone/studentNumberï¼Œä¾¿äºåŒºåˆ†é‡åï¼‰

---

## 2. æˆæœç®¡ç†ï¼ˆAchievementsï¼‰

æƒé™æ¨¡å‹ï¼ˆç®€åŒ–è¯´æ˜ï¼‰
- ç®¡ç†å‘˜ï¼ˆAdminï¼‰: å¯å¢åˆ æ”¹æŸ¥
- æ‹¥æœ‰è€…ï¼ˆOwnerï¼‰: å¯ç¼–è¾‘/åˆ é™¤è‡ªå·±çš„æˆæœ
- ç¬¬ä¸€ä½œè€…ï¼ˆFirst Author, internal, author_order=1ï¼‰: å¯ç¼–è¾‘/åˆ é™¤è¯¥æˆæœ

> è¯´æ˜ï¼šæˆæœå·²æ‹†åˆ†ä¸º `lab_achievement_paper`ï¼ˆè®ºæ–‡ï¼‰ä¸ `lab_achievement_project`ï¼ˆé¡¹ç›®ï¼‰æ˜ç»†è¡¨ï¼Œæ‰€æœ‰å†™å…¥æ¥å£ä¼šåŒæ­¥æ›´æ–°æ˜ç»†è¡¨ä¸èšåˆè¡¨ `lab_achievement`ï¼ŒæŸ¥è¯¢ç»“æœäº¦ä¼šåˆå¹¶è¿”å›ã€‚

2.1 ç®¡ç†ç«¯åˆ—è¡¨ï¼ˆç®¡ç†å‘˜/å…·å¤‡æƒé™çš„ç”¨æˆ·ï¼‰
- GET /lab/achievements?keyword=&type=&paperType=&projectType=&categoryId=&parentCategoryId=&published=&isVerified=&ownerUserId=&dateStart=&dateEnd=&pageNum=&pageSize=
- æƒé™ï¼šlab:achievement:list
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯´æ˜ï¼š
  - keyword (string): æ ‡é¢˜/å…³é”®è¯æ¨¡ç³Š; title/keywords
  - type (int): 1=è®ºæ–‡(paper), 2=é¡¹ç›®(project)
  - paperType (int): 1-7
  - projectType (int): 1-8
  - categoryId (long): æˆæœç±»å‹IDï¼ˆæ–°ç±»å‹ç³»ç»Ÿï¼Œæ¨èä¼ äºŒçº§åˆ†ç±»IDï¼Œä¾‹å¦‚ 4=ä¼šè®®è®ºæ–‡, 15=é’å¹´åŸºé‡‘ï¼‰
  - parentCategoryId (long): ä¸€çº§åˆ†ç±»IDï¼ˆèšåˆå…¶æ‰€æœ‰äºŒçº§åˆ†ç±»ä¸€èµ·åˆ†é¡µï¼‰ã€1:è®ºæ–‡ï¼Œ2:é¡¹ç›®ã€‘
  - published (bool)
  - isVerified (bool)
  - ownerUserId (long)
  - dateStart/dateEnd (date): è®ºæ–‡åŒ¹é… publish_dateï¼Œé¡¹ç›®åŒ¹é… project_start_date
  - å…¼å®¹è¯´æ˜ï¼šå½“ä¼ å…¥ parentCategoryId æˆ– categoryId æ—¶ï¼Œåç«¯å°†å¿½ç•¥ typeï¼ˆtype ä¸ºå…¼å®¹å‚æ•°ï¼‰

2.2 è¯¦æƒ…
- GET /lab/achievements/{id}
- æƒé™ï¼šlab:achievement:query
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¿”å›ï¼šLabAchievementDTOï¼ˆå«ä½œè€…åˆ—è¡¨ã€fundIdsã€fundAssociations ç­‰è®ºæ–‡åŸºé‡‘ä¿¡æ¯ï¼‰

2.3 æ–°å¢
- POST /lab/achievements
- æƒé™ï¼šlab:achievement:add
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- Body: CreateLabAchievementCommand
  - title (string) æ ‡é¢˜
  - type (int) 1=paper, 2=project
  - paperType (int) è®ºæ–‡ç±»å‹
  - projectType (int) é¡¹ç›®ç±»å‹
  - categoryId (long) æˆæœç±»å‹IDï¼ˆæ–°ç±»å‹ç³»ç»Ÿï¼Œæ¨èä¼ äºŒçº§åˆ†ç±»IDï¼›æ›´æ–°æ¥å£åŒæ­¤ï¼‰
  - publishDate (string yyyy) è®ºæ–‡å‘è¡¨å¹´ï¼ˆtype=1å¿…å¡«ï¼‰
  - projectStartDate (string yyyy-MM) é¡¹ç›®å¼€å§‹ï¼ˆæœˆï¼‰ï¼ˆtype=2å¿…å¡«ï¼‰
  - projectEndDate (string yyyy-MM å¯ç©º) é¡¹ç›®ç»“æŸï¼ˆæœˆï¼‰

  - ç±»å‹è‡ªåŠ¨è¡¥å…¨ä¸å†²çªè§„åˆ™ï¼ˆcategoryId ä¼˜å…ˆï¼‰
    - æ¨èï¼šä»…ä¼ â€œäºŒçº§â€categoryIdï¼ˆå¦‚ 4=ä¼šè®®è®ºæ–‡ï¼Œ15=é’å¹´åŸºé‡‘ï¼‰ï¼›åç«¯è‡ªåŠ¨è¡¥å…¨æ—§å­—æ®µï¼š
      - è®ºæ–‡ï¼šè‡ªåŠ¨è¡¥å…¨ type=1ã€paperType=å¯¹åº”å­ç±»å‹
      - é¡¹ç›®ï¼šè‡ªåŠ¨è¡¥å…¨ type=2ã€projectType=å¯¹åº”å­ç±»å‹
    - è‡ªå®šä¹‰â€œäºŒçº§â€categoryIdï¼ˆä¸åœ¨é¢„ç½®æ˜ å°„è¡¨å†…ï¼‰å°†å›é€€ä¸ºï¼š
      - è®ºæ–‡ä¾§ï¼špaperType=7ï¼ˆå…¶ä»–è®ºæ–‡ï¼‰
      - é¡¹ç›®ä¾§ï¼šprojectType=8ï¼ˆå…¶ä»–é¡¹ç›®ï¼‰
    - è¿‡æ¸¡æœŸï¼šå†™å…¥æ—¶å¦‚ä»ä¼ æ—§å­—æ®µï¼ˆtype/paperType/projectTypeï¼‰ï¼Œåç«¯å°†å¿½ç•¥å¹¶è¦†ç›–ä¸º categoryId æ¨å¯¼å€¼ï¼›åç»­å°†æ”¹ä¸ºå†²çªå³æŠ¥é”™
    - æ—¥æœŸä»ä¸ºå¿…å¡«ï¼šè®ºæ–‡éœ€ publishDateï¼ˆyyyyï¼‰ï¼›é¡¹ç›®éœ€ projectStartDateï¼ˆyyyy-MMï¼›projectEndDate å¦‚ä¼ å¿…é¡»ä¸æ—©äºå¼€å§‹ï¼‰

  - ç¤ºä¾‹ï¼šä»…ä¼ â€œäºŒçº§â€categoryId çš„è®ºæ–‡
    ```json
    {
      "title": "æµ‹è¯•-ä¼šè®®è®ºæ–‡",
      "categoryId": 4,
      "publishDate": "2025",
      "published": true,

      "authors": []
    }
    ```
  - ç¤ºä¾‹ï¼šè‡ªå®šä¹‰â€œäºŒçº§â€categoryId=18ï¼ˆæŒ‚åœ¨â€œè®ºæ–‡â€é¡¶çº§ä¸‹ï¼‰ï¼Œå°†è‡ªåŠ¨è¡¥å…¨ä¸ºâ€œå…¶ä»–è®ºæ–‡â€ï¼špaperType=7
    ```json
    {
      "title": "æµ‹è¯•-è‡ªå®šä¹‰è®ºæ–‡åˆ†ç±»",
      "categoryId": 18,
      "publishDate": "2021",
      "published": true,
      "authors": []
    }
    ```

  - æ›´æ–°æ¥å£åŒä¸Šè¿°â€œcategoryId ä¼˜å…ˆè‡ªåŠ¨è¡¥å…¨â€è§„åˆ™ï¼›å†™å…¥æ—¶å¦‚ä¼ æ—§å­—æ®µï¼Œåç«¯ä¼šå¿½ç•¥å¹¶è¦†ç›–ä¸º categoryId æ¨å¯¼å€¼ï¼ˆè¿‡æ¸¡æœŸï¼‰ï¼Œåç»­å°†æ”¹ä¸ºå†²çªå³æŠ¥é”™

  - venue/linkUrl/gitUrl/homepageUrl/pdfUrl/doi/coverUrl (string)
  - fundingAmount (decimal)
  - authors (array<CreateAuthorCommand>) æ‰¹é‡ä½œè€…ï¼š
    - userId (long) å†…éƒ¨ä½œè€…IDï¼ˆå¼ºçƒˆæ¨èï¼‰
    - username/email/phone/studentNumberï¼ˆè‹¥æœªä¼  userIdï¼Œç”¨äºè‡ªåŠ¨ç»‘å®šï¼‰
    - name/nameEn (string) å§“åï¼ˆå¤–éƒ¨ä½œè€…å¿…å¡«ï¼›è‡ªåŠ¨ç»‘å®šå¤±è´¥æ—¶ä¿ç•™ä¸ºå¤–éƒ¨ä½œè€…ï¼‰
    - authorOrder (int>0) ä½œè€…é¡ºåºï¼ˆå”¯ä¸€ï¼‰
    - isCorresponding (bool)
    - role (string)
    - visible (bool) ä»…å¯¹å†…éƒ¨ä½œè€…ç”Ÿæ•ˆ
  - fundAssociations (array) è®ºæ–‡åŸºé‡‘å…³è”ï¼ˆtype=1 æ—¶å¯é€‰ï¼‰ï¼š
    - fundId (long) åŸºé‡‘ID
    - amount (decimal) èµ„åŠ©é‡‘é¢ï¼ˆä¸‡å…ƒï¼Œå¯ä¸ºç©ºï¼‰
  - fundIds (array<long>) å·²åºŸå¼ƒå­—æ®µï¼Œä»…ç”¨äºå…¼å®¹æ—§å‰ç«¯ï¼›è‹¥åŒæ—¶æäº¤ fundAssociationsï¼Œå°†ä»¥æ–°å­—æ®µä¸ºå‡†

2.4 ä¿®æ”¹
- PUT /lab/achievements/{id}
- æƒé™ï¼šlab:achievement:edit
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- å¯æ“ä½œäººï¼šç®¡ç†å‘˜/æ‹¥æœ‰è€…/ç¬¬ä¸€ä½œè€…ï¼ˆå†…éƒ¨ï¼Œauthor_order=1ï¼‰
- Bodyï¼šåŒ CreateLabAchievementCommandï¼›è‹¥åŒ…å« authorsï¼Œå°†å…¨é‡æ›¿æ¢ï¼š
  - é€»è¾‘ï¼šç¡¬åˆ å†å²è½¯åˆ ä½œè€… -> è½¯åˆ å½“å‰æœªåˆ ä½œè€… -> æ’å…¥æ–°åˆ—è¡¨
  - fundAssociationsï¼šåŒæ–°å¢æ¥å£è¯­ä¹‰ï¼Œä¼ å…¥å³æ•´ä½“æ›¿æ¢è®ºæ–‡åŸºé‡‘å…³è”ï¼›è‹¥ä¸ºç©ºæ•°ç»„åˆ™æ¸…ç©ºå…³è”

2.5 åˆ é™¤
- DELETE /lab/achievements/{id}
- æƒé™ï¼šlab:achievement:remove
- å¯æ“ä½œäººï¼šç®¡ç†å‘˜/æ‹¥æœ‰è€…/ç¬¬ä¸€ä½œè€…ï¼ˆå†…éƒ¨ï¼Œauthor_order=1ï¼‰
- è¡Œä¸ºï¼šæˆæœè½¯åˆ ï¼ŒåŒæ—¶è½¯åˆ è¯¥æˆæœä¸‹æœªåˆ ä½œè€…ï¼›ä½œè€…ç«¯ä¸å¯è§

---

## 2.6 æˆæœç®¡ç† v2ï¼ˆä»…å¶å­ categoryIdï¼Œæ‹’æ”¶æ—§å­—æ®µï¼‰
- åŸºè·¯å¾„ï¼š/v2/lab/achievements
- å†™æ¥å£ä¸æƒé™ï¼šæ²¿ç”¨ v1 ç›¸åŒæƒé™æ ‡è¯†ï¼ˆlab:achievement:add/edit/remove ç­‰ï¼‰
- è®¾è®¡ç›®æ ‡ï¼šå†™å…¥ç«¯å½»åº•å»é™¤ legacy å­—æ®µï¼ˆtype/paperType/projectTypeï¼‰ï¼Œä»…æäº¤äºŒçº§åˆ†ç±» IDï¼ˆcategoryIdï¼‰
- å…¼å®¹ç­–ç•¥ï¼šæœåŠ¡ç«¯å†…éƒ¨ä¼šæŒ‰ categoryId è‡ªåŠ¨æ¨å¯¼æ—§å­—æ®µï¼Œè¯»ä¾§ä¿æŒå…¼å®¹

2.6.1 æ–°å¢ï¼ˆv2ï¼‰
- POST /v2/lab/achievements
- æƒé™ï¼šlab:achievement:add
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯·æ±‚ä½“ï¼šCreateLabAchievementV2Commandï¼ˆä»…åˆ—å‡ºä¸ v2 ç›¸å…³çš„å…³é”®å­—æ®µï¼‰
  - title (string, required)ï¼šæ ‡é¢˜ï¼Œ<=500
  - categoryId (long, required)ï¼šå¿…é¡»ä¸ºå¶å­ï¼ˆäºŒçº§ï¼‰åˆ†ç±» ID
  - venue (string, optional)ï¼šæœŸåˆŠ/ä¼šè®®/å‘å¸ƒæ¸ é“ï¼Œ<=300
  - publishDate (string, optional)ï¼šè®ºæ–‡å¹´ä»½ï¼Œæ ¼å¼ yyyy
  - projectStartDate/projectEndDate (string, optional)ï¼šé¡¹ç›®èµ·æ­¢æ—¶é—´ï¼Œæ ¼å¼ yyyy-MM
  - linkUrl/gitUrl/homepageUrl/pdfUrl/doi (string, optional)ï¼šå¤–é“¾/ä»“åº“/ä¸»é¡µ/PDF/DOI
  - reference (string, optional)ï¼šå‚è€ƒæ–‡çŒ®ï¼Œ<=5000
  - fundingAmount (number, optional)ï¼šé¡¹ç›®ç»è´¹ï¼ˆä¸‡å…ƒï¼‰ï¼Œ>=0
  - published (bool, optional)ï¼šæ˜¯å¦å¯¹å¤–å‘å¸ƒï¼Œé»˜è®¤ false
  - authors (array<CreateAuthorCommand>, optional)ï¼šä½œè€…åˆ—è¡¨ï¼ˆè¯­ä¹‰ä¸ v1 ç›¸åŒï¼‰
- ä¸¥æ ¼æ‹’æ”¶å­—æ®µï¼štypeã€paperTypeã€projectType ä¸€æ—¦å‡ºç°åœ¨è¯·æ±‚ä½“ä¸­å³ 400
- è¯·æ±‚ç¤ºä¾‹ï¼š
```json
{
  "title": "æµ‹è¯•-ä¼šè®®è®ºæ–‡",
  "categoryId": 24,
  "publishDate": "2025",
  "published": true,
  "authors": []
}
```
- æˆåŠŸå“åº”ï¼š
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": 123  // æ–°å»ºçš„æˆæœID
}
```
- å¸¸è§é”™è¯¯ï¼š
  - 400ï¼š{"code":103,"msg":"å¿…é¡»ä¼ äºŒçº§åˆ†ç±»ID: categoryId"}
  - 400ï¼š{"code":103,"msg":"v2 æ¥å£ä¸å…è®¸æäº¤ legacy å­—æ®µï¼štype"}
  - 400ï¼š{"code":103,"msg":"è¯·æ±‚å‚æ•°å¼‚å¸¸ï¼Œå­—æ®µæ ¡éªŒå¤±è´¥ â€¦"}

2.6.2 ä¿®æ”¹ï¼ˆv2ï¼‰
- PUT /v2/lab/achievements/{id}
- æƒé™ï¼šlab:achievement:edit
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯·æ±‚ä½“åŒâ€œæ–°å¢ï¼ˆv2ï¼‰â€ï¼ŒåŒæ ·æ‹’æ”¶ type/paperType/projectType
- æˆåŠŸå“åº”ï¼š
```json
{ "code": 200, "msg": "æ“ä½œæˆåŠŸ", "data": null }
```
- æ³¨æ„ï¼šè‹¥ä¼  authorsï¼Œå°†é‡‡ç”¨ä¸ v1 ä¸€è‡´çš„â€œå…¨é‡æ›¿æ¢â€è¯­ä¹‰

2.6.3 ä¸šåŠ¡è¯´æ˜
- åˆ†ç±»è¦æ±‚ï¼šcategoryId å¿…é¡»ä¸ºå¶å­ï¼ˆäºŒçº§ï¼‰åˆ†ç±»ï¼›é¡¶çº§åˆ†ç±»æˆ–ä¸å­˜åœ¨çš„ ID å°†è¢«æ‹’ç»
- è‡ªåŠ¨æ¨å¯¼ï¼šåç«¯æ ¹æ® categoryId è‡ªåŠ¨åˆ¤å®šå¤§ç±»ï¼ˆè®ºæ–‡/é¡¹ç›®ï¼‰ä¸å­ç±»å‹ï¼Œå†…éƒ¨å›å¡« legacy å­—æ®µï¼ˆå¯¹è°ƒç”¨æ–¹é€æ˜ï¼‰
- è§„åˆ™æ ¡éªŒï¼šç»§ç»­æ ¹æ®å¤§ç±»æ‰§è¡Œåˆç†çš„ä¸šåŠ¡æ ¡éªŒï¼ˆå¦‚è®ºæ–‡ç±»å¯èƒ½æ ¡éªŒ publishDateï¼Œé¡¹ç›®ç±»å¯èƒ½æ ¡éªŒèµ·æ­¢æ—¶é—´ï¼‰
- è¯»ä¾§å…¼å®¹ï¼šæŸ¥è¯¢/è¯¦æƒ…ä»å¯èƒ½è¿”å› legacy å­—æ®µç”¨äºå…¼å®¹è€å‰ç«¯ï¼Œåç»­ä¼šé€æ­¥æ”¶æ•›ä¸ºä»…å±•ç¤º category ä¿¡æ¯

2.6.4 è¿ç§»å»ºè®®
- å‰ç«¯ï¼šæŠŠ v1 å†™æ¥å£ï¼ˆPOST/PUT /lab/achievementsï¼‰å…¨éƒ¨åˆ‡åˆ° v2ï¼ˆ/v2/lab/achievementsï¼‰
 - ç§»é™¤è¯·æ±‚ä½“ä¸­çš„ type/paperType/projectTypeï¼Œä»…ä¿ç•™ categoryId ä¸å…¶ä»–å­—æ®µ
- åç«¯ï¼šä¿ç•™ v1 è¯»å†™ä¸€æ®µæ—¶é—´ç”¨äºè¿‡æ¸¡ï¼Œä½†æ ‡è®°ä¸ºâ€œåºŸå¼ƒâ€ï¼Œåç»­è®¡åˆ’ç§»é™¤ legacy å­—æ®µä¾èµ–


2.7 è®ºæ–‡åŸºé‡‘å…³è”ï¼ˆFund Associationsï¼‰
- GET /lab/achievements/{id}/funds
  - æƒé™ï¼šlab:achievement:query
  - æ›´æ–°æ—¥æœŸï¼š2025-10-14
  - è¯´æ˜ï¼šä»…å¯¹è®ºæ–‡æˆæœæœ‰æ•ˆï¼Œè¿”å›å½“å‰å…³è”çš„åŸºé‡‘åˆ—è¡¨ï¼ŒåŒ…å« `fundId` ä¸å¯é€‰çš„ `amount`
- PUT /lab/achievements/{id}/funds
  - æƒé™ï¼šlab:achievement:edit
  - æ›´æ–°æ—¥æœŸï¼š2025-10-14
  - è¯·æ±‚ä½“ï¼šList<FundAssociationCommand>
    ```json
    [
      { "fundId": 101, "amount": 12.5 },
      { "fundId": 205 }
    ]
    ```
  - è¯­ä¹‰ï¼šæ•´ä½“æ›¿æ¢è®ºæ–‡ä¸åŸºé‡‘çš„å…³è”å…³ç³»ï¼›ç©ºæ•°ç»„è¡¨ç¤ºæ¸…ç©ºï¼›æäº¤ `fundId` é‡å¤æ—¶ä»¥æœ€åä¸€æ¬¡ä¸ºå‡†
- ä¸šåŠ¡è§„åˆ™
  - ä»…å½“æˆæœç±»å‹ä¸ºè®ºæ–‡ï¼ˆtype=1ï¼‰æ—¶å…è®¸è°ƒç”¨ï¼›å¦åˆ™è¿”å› 400/403
  - æ›´æ–°æˆåŠŸåä¼šåŒæ­¥åˆ·æ–° `lab_achievement_paper` ä¸ `lab_achievement` çš„æ›´æ–°æ—¶é—´


## 3. æˆ‘çš„æˆæœï¼ˆMy Achievementsï¼‰

3.1 åˆ—è¡¨ï¼ˆæˆ‘æ‹¥æœ‰çš„ + æˆ‘å‚ä¸çš„ï¼‰
- GET /lab/my-achievements?keyword=&type=&paperType=&projectType=&categoryId=&parentCategoryId=&published=&isVerified=&ownerName=&authorName=&dateStart=&dateEnd=&pageNum=&pageSize=
- æƒé™ï¼šå·²ç™»å½•
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯´æ˜ï¼š
  - keywordï¼šæ ‡é¢˜/å…³é”®è¯æ¨¡ç³Š
  - ownerNameï¼šæ‹¥æœ‰è€…å§“åï¼ˆæ¨¡ç³ŠåŒ¹é… real_name/english_nameï¼›ä»…åœ¨â€œæˆ‘çš„èŒƒå›´â€å†…è¿‡æ»¤ï¼‰
  - authorNameï¼šä½œè€…å§“åï¼ˆæ¨¡ç³ŠåŒ¹é…ä½œè€…è¡¨ name/name_en + å†…éƒ¨ä½œè€…å§“åï¼›ä»…åœ¨â€œæˆ‘çš„èŒƒå›´â€å†…è¿‡æ»¤ï¼‰
  - categoryIdï¼šäºŒçº§åˆ†ç±»IDï¼ˆå¶å­åˆ†ç±»ï¼‰
  - parentCategoryIdï¼šä¸€çº§åˆ†ç±»IDï¼ˆèšåˆå…¶æ‰€æœ‰äºŒçº§åˆ†ç±»ä¸€èµ·åˆ†é¡µï¼‰
  - å…¼å®¹è¯´æ˜ï¼šå½“ä¼ å…¥ parentCategoryId æˆ– categoryId æ—¶ï¼Œåç«¯å°†å¿½ç•¥ typeï¼ˆtype å·²æ ‡æ³¨ä¸º Deprecatedï¼‰
- è¿”å›ï¼šPageDTO<LabAchievementDTO>ï¼ˆå«å…¨éƒ¨ä½œè€…ï¼Œä¸è¿‡æ»¤ visibleï¼‰

3.1.1 å­—æ®µè¡¨ä¸ç¤ºä¾‹
- ä¸€çº§åˆ†ç±»èšåˆåˆ†é¡µ
```
GET /lab/my-achievements?parentCategoryId=<ä¸€çº§ID>&pageNum=1&pageSize=20
```
- äºŒçº§åˆ†ç±»åˆ†é¡µ
```
GET /lab/my-achievements?categoryId=<äºŒçº§ID>&pageNum=1&pageSize=20
```

3.2 åˆ‡æ¢â€œæˆ‘â€åœ¨æŸæˆæœä¸­çš„ä¸ªäººé¡µå¯è§æ€§ï¼ˆä»…å†…éƒ¨ä½œè€…ï¼‰
- PUT /lab/my-achievements/{achievementId}/visibility?visible=true|false
- æƒé™ï¼šå·²ç™»å½•ï¼ˆä»…ä½œè€…æœ¬äººèƒ½æ”¹è‡ªå·±ï¼‰

---

## 4. æˆæœä½œè€…ï¼ˆAuthorsï¼‰

åŸºç¡€è·¯å¾„ï¼š/lab/achievements/{achievementId}/authors

4.1 åˆ—è¡¨
- GET /
- æƒé™ï¼šlab:achievement:query
- è¿”å›ï¼šList<LabAchievementAuthorEntity>ï¼ˆæŒ‰ author_order æ’åºï¼‰

4.2 æ–°å¢ä½œè€…ï¼ˆå†…éƒ¨/å¤–éƒ¨ä½œè€…å‡æ”¯æŒï¼‰
- POST /
- æƒé™ï¼šlab:achievement:editï¼ˆä¸”éœ€æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼‰
- Body: AddAuthorCommand
  - å…¥å‚ä¼˜å…ˆçº§ä¸è‡ªåŠ¨ç»‘å®šï¼š
    - ç¬¬ä¸€ä¼˜å…ˆï¼šuserIdï¼ˆç›´æ¥ç»‘å®šä¸ºå†…éƒ¨ä½œè€…ï¼›åŒä¸€æˆæœä¸‹åŒä¸€ userId ä»…ä¸€æ¬¡ï¼‰
    - ç¬¬äºŒä¼˜å…ˆï¼šusername/email/phone/studentNumberï¼ˆæŒ‰æ­¤ä¼˜å…ˆçº§å”¯ä¸€è§£æä¸º lab_user å¹¶ç»‘å®šï¼‰
    - ç¬¬ä¸‰ä¼˜å…ˆï¼šname/nameEnï¼ˆä»…å½“å”¯ä¸€å§“åå‘½ä¸­æ—¶æ‰è‡ªåŠ¨ç»‘å®šï¼›å¦åˆ™ä½œä¸ºå¤–éƒ¨ä½œè€…ï¼‰
  - å¸¸è§è§„åˆ™ï¼š
    - ä½œè€…é¡ºåº authorOrder å¿…é¡»å”¯ä¸€ä¸” > 0
    - è‹¥æ–°å¢å†…éƒ¨ä½œè€…é‡åˆ°æ•°æ®åº“å”¯ä¸€å†²çª(achievement_id, user_id)ï¼Œæ¥å£ä¼šï¼š
      - è‹¥å­˜åœ¨ä¸”æœªåˆ ï¼šæŠ¥â€œè¯¥å†…éƒ¨ä½œè€…å·²å­˜åœ¨äºè¯¥æˆæœâ€
      - è‹¥å­˜åœ¨ä½†è½¯åˆ ï¼šç›´æ¥â€œå¤æ´»â€å¹¶æ›´æ–°è¯¥ä½œè€…ä¿¡æ¯

4.3 æ›´æ–°ä½œè€…
- PUT /{authorId}
- æƒé™ï¼šlab:achievement:editï¼ˆä¸”éœ€æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼‰
- Body: UpdateAuthorCommandï¼ˆå¯æ›´æ–° userId/name/nameEn/affiliation/authorOrder/isCorresponding/role/visibleï¼‰

4.4 åˆ é™¤ä½œè€…
- DELETE /{authorId}
- æƒé™ï¼šlab:achievement:editï¼ˆä¸”éœ€æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼‰
- è¡Œä¸ºï¼šè½¯åˆ ä½œè€…

4.5 è°ƒæ•´ä½œè€…é¡ºåº
- PUT /{authorId}/reorder?newOrder=1..n
- æƒé™ï¼šlab:achievement:editï¼ˆä¸”éœ€æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼‰
- è§„åˆ™ï¼šä½œè€…é¡ºåºå”¯ä¸€

4.6 åˆ‡æ¢ä½œè€…å¯è§æ€§ï¼ˆä»…å†…éƒ¨ä½œè€…ï¼‰
- PUT /{authorId}/visibility?visible=true|false
- æƒé™ï¼šlab:achievement:editï¼ˆä¸”éœ€æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼‰

---

## 5. æˆæœç±»å‹ç®¡ç†ï¼ˆAchievement Categoriesï¼‰

5.1 è·å–ç±»å‹æ ‘
- GET /lab/achievement-categories?includeInactive=false
- æƒé™ï¼š`lab:category:list` æˆ– ç®¡ç†å‘˜
- è¿”å›ï¼šList<LabAchievementCategoryDTO>
- å­—æ®µï¼šid, parentId, categoryCode, categoryName, categoryNameEn, description, sortOrder, isSystem, isActive, icon, color, parentName, children[]
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -X GET "http://localhost:8080/lab/achievement-categories?includeInactive=false" \
 -H "Authorization: Bearer <token>"
```
- è¿”å›å­—æ®µç¤ºä¾‹ï¼ˆå­—æ®µç»“æ„ç¤ºæ„ï¼‰ï¼š
```json
[
  {
    "id": 1,
    "parentId": null,
    "categoryCode": "string",
    "categoryName": "string",
    "categoryNameEn": "string|null",
    "description": "string|null",
    "sortOrder": 1,
    "isSystem": true,
    "isActive": true,
    "icon": "string|null",
    "color": "#1890ff|null",
    "parentName": "string|null",
    "children": [
      {
        "id": 4,
        "parentId": 1,
        "categoryCode": "string",
        "categoryName": "string",
        "categoryNameEn": "string|null",
        "description": "string|null",
        "sortOrder": 10,
        "isSystem": true,
        "isActive": true,
        "icon": "string|null",
        "color": "string|null",
        "parentName": "string",
        "children": []
      }
    ]
  }
]
```

5.2 åˆ†é¡µæŸ¥è¯¢ç±»å‹åˆ—è¡¨
- GET /lab/achievement-categories/list?keyword=&parentId=&isActive=&isSystem=&categoryCode=&includeChildren=&topLevelOnly=&secondLevelOnly=&pageNum=&pageSize=
- æƒé™ï¼š`lab:category:list`
- è¯·æ±‚å‚æ•°ï¼ˆQueryï¼Œå‡å¯é€‰ï¼‰
  - keyword (string): å…³é”®è¯ï¼ŒåŒ¹é…åç§°/ç¼–ç /è‹±æ–‡å
  - parentId (long): çˆ¶ç±»å‹IDï¼›null è¡¨ç¤ºæŸ¥è¯¢ä¸€çº§ç±»å‹
  - isActive (bool): æ˜¯å¦å¯ç”¨
  - isSystem (bool): æ˜¯å¦ç³»ç»Ÿå†…ç½®
  - categoryCode (string): ç±»å‹ç¼–ç 
  - includeChildren (bool): æ˜¯å¦åŒ…å«å­ç±»å‹
  - topLevelOnly (bool): ä»…ä¸€çº§ç±»å‹
  - secondLevelOnly (bool): ä»…äºŒçº§ç±»å‹
  - pageNum/pageSize: åˆ†é¡µå‚æ•°
- è¿”å›ï¼šPageDTO<LabAchievementCategoryDTO>
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -G "http://localhost:8080/lab/achievement-categories/list" \
 -H "Authorization: Bearer <token>" \
 --data-urlencode "keyword=è®ºæ–‡" \
 --data-urlencode "topLevelOnly=false" \
 --data-urlencode "secondLevelOnly=true" \
 --data-urlencode "pageNum=1" \
 --data-urlencode "pageSize=10"
```
- è¿”å›å­—æ®µç¤ºä¾‹ï¼ˆResponseDTO åŒ…è£…çš„ PageDTOï¼‰ï¼š
```json
{
  "code": 0,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 123,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "id": 4,
        "parentId": 1,
        "categoryCode": "string",
        "categoryName": "string",
        "categoryNameEn": "string|null",
        "description": "string|null",
        "sortOrder": 10,
        "isSystem": true,
        "isActive": true,
        "icon": "string|null",
        "color": "string|null",
        "parentName": "string"
      }
    ]
  }
}
```

5.3 è·å–ç±»å‹è¯¦æƒ…
- GET /lab/achievement-categories/{id}
- æƒé™ï¼š`lab:category:query`
- è¿”å›ï¼šLabAchievementCategoryDTO

5.4 åˆ›å»ºç±»å‹
- POST /lab/achievement-categories
- æƒé™ï¼š`lab:category:add`
- Body: CreateCategoryCommand
  - parentId (long|null): çˆ¶ç±»å‹IDï¼Œnull è¡¨ç¤ºä¸€çº§ç±»å‹
  - categoryCode (string): ç±»å‹ç¼–ç ï¼ˆå”¯ä¸€ï¼Œå¯é€‰ï¼›æœªæä¾›åˆ™åç«¯æŒ‰åç§°è‡ªåŠ¨ç”Ÿæˆï¼‰
  - categoryName (string, å¿…å¡«): ç±»å‹åç§°
  - categoryNameEn (string): è‹±æ–‡åç§°
  - description (string): æè¿°
  - sortOrder (int): æ’åºï¼ˆå¯é€‰ï¼‰
  - isActive (bool): æ˜¯å¦å¯ç”¨ï¼Œé»˜è®¤ true
  - icon (string): å›¾æ ‡
  - color (string): é¢œè‰²æ ‡è¯†ï¼ˆå¦‚ #1890ffï¼‰
- è¿”å›ï¼šLongï¼ˆæ–°å»ºç±»å‹IDï¼‰
- è¯·æ±‚ç¤ºä¾‹ï¼ˆä¸€çº§ç±»å‹ï¼‰
```bash
curl -X POST "http://localhost:8080/lab/achievement-categories" \
 -H "Authorization: Bearer <token>" -H "Content-Type: application/json" \
 -d '{
   "parentId": null,
   "categoryName": "è‡ªå®šä¹‰ä¸€çº§",
   "categoryNameEn": "Custom Top",
   "description": "è¯´æ˜",
   "sortOrder": 99,
   "isActive": true,
   "icon": "icon-name",
   "color": "#1890ff"
 }'
```
- è¯·æ±‚ç¤ºä¾‹ï¼ˆäºŒçº§ç±»å‹ï¼‰
```bash
curl -X POST "http://localhost:8080/lab/achievement-categories" \
 -H "Authorization: Bearer <token>" -H "Content-Type: application/json" \
 -d '{
   "parentId": 1,
   "categoryCode": "CUSTOM_SUB",
   "categoryName": "è‡ªå®šä¹‰äºŒçº§"
 }'
```
- è¿”å›å­—æ®µç¤ºä¾‹ï¼ˆResponseDTO åŒ…è£…ï¼‰
```json
{
  "code": 0,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": 123
}
```

5.5 æ›´æ–°ç±»å‹
- PUT /lab/achievement-categories/{id}
- æƒé™ï¼š`lab:category:edit`
- Body: UpdateCategoryCommandï¼ˆå­—æ®µåŒåˆ›å»ºï¼Œå‡ä¸ºå¯é€‰ï¼‰
- è¿”å›ï¼šVoid
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -X PUT "http://localhost:8080/lab/achievement-categories/12" \
 -H "Authorization: Bearer <token>" -H "Content-Type: application/json" \
 -d '{
   "parentId": 1,
   "categoryCode": "CONF_PAPER",
   "categoryName": "ä¼šè®®è®ºæ–‡",
   "isActive": true,
   "sortOrder": 20,
   "icon": "icon-doc",
   "color": "#52c41a"
 }'
```
- è¿”å›ç¤ºä¾‹ï¼š
```json
{ "code": 0, "msg": "æ“ä½œæˆåŠŸ", "data": null }
```

5.6 å¯ç”¨/ç¦ç”¨ç±»å‹
- PUT /lab/achievement-categories/{id}/status?active=true|false
- æƒé™ï¼š`lab:category:edit`
- è¿”å›ï¼šVoid
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -X PUT "http://localhost:8080/lab/achievement-categories/12/status?active=false" \
 -H "Authorization: Bearer <token>"
```
- è¿”å›ç¤ºä¾‹ï¼š
```json
{ "code": 0, "msg": "æ“ä½œæˆåŠŸ", "data": null }
```

5.7 æ‰¹é‡æ›´æ–°æ’åº
- PUT /lab/achievement-categories/batch/sort
- æƒé™ï¼š`lab:category:sort`
- Body: BatchUpdateSortCommand
  - items (array): æ’åºé¡¹åˆ—è¡¨
    - id (long): ç±»å‹ID
    - sortOrder (int): æ’åºå·
- è¿”å›ï¼šVoid
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -X PUT "http://localhost:8080/lab/achievement-categories/batch/sort" \
 -H "Authorization: Bearer <token>" -H "Content-Type: application/json" \
 -d '{
   "items": [
     { "id": 1, "sortOrder": 1 },
     { "id": 4, "sortOrder": 2 },
     { "id": 5, "sortOrder": 3 }
   ]
 }'
```
- è¿”å›ç¤ºä¾‹ï¼š
```json
{ "code": 0, "msg": "æ“ä½œæˆåŠŸ", "data": null }
```

5.8 åˆ é™¤ç±»å‹
- DELETE /lab/achievement-categories/{id}
- æƒé™ï¼š`lab:category:remove`
- è¡Œä¸ºï¼šè½¯åˆ é™¤
- é™åˆ¶ï¼šç³»ç»Ÿå†…ç½®ç±»å‹ä¸å¯åˆ é™¤ï¼›å­˜åœ¨å­ç±»å‹æˆ–å·²è¢«æˆæœä½¿ç”¨æ—¶ä¸å¯åˆ é™¤
- è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
curl -X DELETE "http://localhost:8080/lab/achievement-categories/12" \
 -H "Authorization: Bearer <token>"
```
- è¿”å›ç¤ºä¾‹ï¼š
```json
{ "code": 0, "msg": "æ“ä½œæˆåŠŸ", "data": null }
```
- å¤±è´¥è¿”å›ç¤ºä¾‹ï¼š
```json
{ "code": 12801, "msg": "è¯¥ç±»å‹å­˜åœ¨æˆæœï¼Œä¸å…è®¸åˆ é™¤", "data": null }
```
```json
{ "code": 12802, "msg": "è¯¥ç±»å‹å­˜åœ¨ä¸‹çº§ç±»å‹ï¼Œä¸å…è®¸åˆ é™¤", "data": null }
```


5.9 å‰ç«¯å¯¹æ¥è¦ç‚¹
- ä¸€çº§ç±»å‹ï¼šparentId=nullï¼›äºŒçº§ç±»å‹ï¼šparentId=å¯¹åº”é¡¶çº§ID
- ç»‘å®šæˆæœæ—¶å»ºè®®ä½¿ç”¨â€œäºŒçº§â€categoryIdï¼›åç«¯åœ¨åˆ›å»º/æ›´æ–°/æŸ¥è¯¢ï¼ˆlistï¼‰å‡å·²æ”¯æŒæŒ‰ categoryId ä½¿ç”¨/ç­›é€‰
- æ¸²æŸ“é€‰æ‹©å™¨æ¨èä½¿ç”¨ï¼š`GET /lab/dicts/achievement-categories`ï¼ˆæ ‘ï¼‰æˆ– `GET /lab/dicts/achievement-categories/flat`ï¼ˆæ‰å¹³ï¼‰

## 6. å­—å…¸ï¼ˆDictionaries, Publicï¼‰

6.1 è·å–å­—å…¸é¡¹
- GET /lab/dicts/{type}
- æƒé™ï¼šå…¬å¼€
- ç”¨é€”ï¼šæ¸²æŸ“ä¸‹æ‹‰ï¼ˆå¦‚è®ºæ–‡ç±»å‹ã€é¡¹ç›®ç±»å‹ã€å­¦æœ¯èº«ä»½ç­‰ï¼‰

6.2 è·å–æˆæœç±»å‹æ ‘å½¢ç»“æ„ï¼ˆæ¨èï¼‰
- GET /lab/dicts/achievement-categories
- æƒé™ï¼šå…¬å¼€
- è¯´æ˜ï¼šè·å–æˆæœç±»å‹çš„æ ‘å½¢ç»“æ„ï¼Œç”¨äºå‰ç«¯ä¸‹æ‹‰é€‰æ‹©
- è¿”å›ï¼šList<LabAchievementCategoryDTO>
- ç‰¹ç‚¹ï¼š
  - ä»…è¿”å›å¯ç”¨çš„ç±»å‹ï¼ˆis_active=trueï¼‰
  - åŒ…å«å®Œæ•´çš„çˆ¶å­å…³ç³»
  - é€‚åˆæ ‘å½¢é€‰æ‹©å™¨ç»„ä»¶

6.3 è·å–æˆæœç±»å‹æ‰å¹³åˆ—è¡¨
- GET /lab/dicts/achievement-categories/flat
- æƒé™ï¼šå…¬å¼€
- è¯´æ˜ï¼šè·å–æˆæœç±»å‹çš„æ‰å¹³åˆ—è¡¨ï¼Œç”¨äºç®€å•ä¸‹æ‹‰é€‰æ‹©
- è¿”å›ï¼šList<LabAchievementCategoryDTO>
- ç‰¹ç‚¹ï¼š
  - ä»…è¿”å›å¯ç”¨çš„ç±»å‹ï¼ˆis_active=trueï¼‰
  - æ‰å¹³åŒ–ç»“æ„ï¼Œä¸åŒ…å«childrenå­—æ®µ
  - é€‚åˆç®€å•çš„ä¸‹æ‹‰é€‰æ‹©å™¨

---

### 4.A ä½œè€…ç®¡ç†å¯¹æ¥æŒ‡å—

1) æ–°å¢æˆæœæ—¶å¦‚ä½•æ–°å¢ä½œè€…
- æ¨èï¼šåœ¨â€œåˆ›å»ºæˆæœâ€çš„åŒä¸€ä¸ªè¯·æ±‚é‡Œæºå¸¦ authors æ•°ç»„ï¼Œä¸€æ¬¡æ€§åˆ›å»ºæˆæœåŠä½œè€…
- æ¥å£ï¼šPOST /lab/achievements
- Bodyï¼ˆCreateLabAchievementCommandï¼‰å…³é”®å­—æ®µï¼š
  - authors: æ•°ç»„<CreateAuthorCommand>
    - userId (number) å†…éƒ¨ä½œè€…IDï¼ˆå¼ºçƒˆæ¨èï¼‰
    - username/email/phone/studentNumberï¼ˆæœªä¼  userId æ—¶ç”¨äºè‡ªåŠ¨ç»‘å®šï¼‰
    - name/nameEn (string) å§“åï¼ˆå¤–éƒ¨ä½œè€…å¿…å¡«ï¼›è‡ªåŠ¨ç»‘å®šå¤±è´¥åˆ™ä½œä¸ºå¤–éƒ¨ä½œè€…ä¿å­˜ï¼‰
    - authorOrder (number>0) ä½œè€…é¡ºåºï¼ˆåŒä¸€æˆæœä¸‹å”¯ä¸€ï¼‰
    - isCorresponding (boolean)
    - role (string)
    - visible (boolean) ä»…å¯¹å†…éƒ¨ä½œè€…ç”Ÿæ•ˆ
- ç¤ºä¾‹ï¼š
  {
    "title": "test111",
    "type": 1,
    "paperType": 1,
    "publishDate": "2025",
    "venue": "",
    "authors": [
      { "userId": 28, "name": "è¢é¹è¾‰", "authorOrder": 1, "visible": true },
      { "name": "ä½Ÿå¼º", "authorOrder": 2, "visible": true }
    ]
  }
- è§„åˆ™è¡¥å……ï¼š
  - è‡ªåŠ¨ç»‘å®šä¼˜å…ˆçº§ï¼šuserId > username/email/phone/studentNumber > å”¯ä¸€ä¸­æ–‡å/è‹±æ–‡å
  - åŒä¸€(achievement_id, user_id) è‹¥å†å²è½¯åˆ å­˜åœ¨ â†’ å¤æ´»å¹¶æ›´æ–°ï¼›æœªåˆ å·²å­˜åœ¨ â†’ è¿”å›ä¸šåŠ¡é”™è¯¯â€œè¯¥å†…éƒ¨ä½œè€…å·²å­˜åœ¨äºè¯¥æˆæœâ€ï¼›ä¸å­˜åœ¨ â†’ æ’å…¥

2) ä¿®æ”¹æˆæœæ—¶å¦‚ä½•å¯¹ä½œè€…å¢/æ”¹/åˆ 
- æ–¹æ¡ˆAï¼ˆæ¨èï¼Œè¡¨å•ä¸€æ¬¡æ€§æäº¤ï¼‰ï¼šå…¨é‡æ›¿æ¢ä½œè€…åˆ—è¡¨
  - æ¥å£ï¼šPUT /lab/achievements/{id}
  - Bodyï¼šä¸åˆ›å»ºä¸€è‡´ï¼Œauthors ä¼ â€œæ›¿æ¢åâ€çš„å®Œæ•´åˆ—è¡¨
  - åç«¯è¡Œä¸ºï¼šæ¸…ç†å†å²è½¯åˆ  â†’ è½¯åˆ å½“å‰æœªåˆ  â†’ é€æ¡å†™å…¥ï¼ˆå†…éƒ¨ä½œè€… upsertï¼›å¤–éƒ¨ä½œè€…æ’å…¥ï¼‰
- æ–¹æ¡ˆBï¼ˆç»†ç²’åº¦é€é¡¹æ“ä½œï¼‰ï¼š
  - æ–°å¢ä½œè€…ï¼šPOST /lab/achievements/{achievementId}/authors
  - æ›´æ–°ä½œè€…ï¼šPUT /lab/achievements/{achievementId}/authors/{authorId}
  - åˆ é™¤ä½œè€…ï¼šDELETE /lab/achievements/{achievementId}/authors/{authorId}
  - è°ƒæ•´é¡ºåºï¼šPUT /lab/achievements/{achievementId}/authors/{authorId}/reorder?newOrder=2
- æƒé™ï¼šä½œè€…ç®¡ç†ï¼ˆå¢/æ”¹/åˆ /è°ƒåºï¼‰éœ€â€œæ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜â€

3) åˆ é™¤æˆæœæ—¶ä½œè€…è¡¨ä¼šæ€æ ·
- æ¥å£ï¼šDELETE /lab/achievements/{id}
- å¯æ“ä½œäººï¼šç®¡ç†å‘˜ æˆ– æ‹¥æœ‰è€… æˆ– ç¬¬ä¸€ä½œè€…ï¼ˆå†…éƒ¨ä¸” author_order=1ï¼‰
- è¡Œä¸ºï¼šæˆæœè½¯åˆ ï¼›ä½œè€…æ¸…ç†=å…ˆç¡¬åˆ å†å²è½¯åˆ ä½œè€…ï¼Œå†è½¯åˆ å½“å‰æœªåˆ ä½œè€…ï¼›ä½œè€…ç«¯ä¸å¯è§

å‰ç«¯å»ºè®®
- æ–°å¢/æ›´æ–°ä½œè€…ä¼˜å…ˆè®©ç”¨æˆ·é€‰æ‹©å®éªŒå®¤ç”¨æˆ·ï¼ˆsearch-select æ‹¿ userIdï¼‰ï¼Œç¡®ä¿ä¸ºå†…éƒ¨ä½œè€…ï¼ˆä¼šå‡ºç°åœ¨â€œæˆ‘çš„æˆæœâ€ï¼‰
- ä»…å§“åå½•å…¥æ—¶æç¤ºï¼šä»…åœ¨â€œå”¯ä¸€å‘½ä¸­â€æ—¶æ‰ä¼šè‡ªåŠ¨ç»‘å®šä¸ºå†…éƒ¨ä½œè€…ï¼Œé‡åå°†ä¿å­˜ä¸ºå¤–éƒ¨ä½œè€…
- åœ¨å‰ç«¯ä¿è¯ authorOrder å”¯ä¸€ï¼Œé¿å…åç«¯æŠ¥é”™

---

## 7. å…¬å¼€æ¥å£ï¼ˆå¯¹å¤–å±•ç¤ºï¼Œæ— éœ€ç™»å½•ï¼‰

7.1 å…¬å¼€æˆæœåˆ—è¡¨
- GET /open/achievements?keyword=&type=&paperType=&projectType=&categoryId=&parentCategoryId=&dateStart=&dateEnd=&authorName=&pageNum=&pageSize=
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯´æ˜ï¼šè¿”å›æ‰€æœ‰æœªåˆ é™¤çš„æˆæœï¼Œæ”¯æŒå¤šç§ç­›é€‰æ¡ä»¶
- è¯·æ±‚å‚æ•°ï¼ˆQueryï¼Œå‡å¯é€‰ï¼‰ï¼š
  - keyword (string): å…³é”®è¯ï¼ŒåŒ¹é… title/keywords
  - type (int)ã€Deprecated/å…¼å®¹å‚æ•°ã€‘ï¼š1=è®ºæ–‡ï¼Œ2=é¡¹ç›®ï¼›å½“ä¼ å…¥ categoryId æˆ– parentCategoryId æ—¶ï¼Œåç«¯å°†å¿½ç•¥ type
  - paperType (int): è®ºæ–‡ç±»å‹ï¼ˆ1-7ï¼‰ï¼Œä»…type=1æ—¶ç”Ÿæ•ˆ
  - projectType (int): é¡¹ç›®ç±»å‹ï¼ˆ1-8ï¼‰ï¼Œä»…type=2æ—¶ç”Ÿæ•ˆ
  - categoryId (long): äºŒçº§åˆ†ç±»IDï¼ˆå¶å­åˆ†ç±»ï¼‰ï¼›æŒ‰è¯¥åˆ†ç±»ç­›é€‰
  - parentCategoryId (long): ä¸€çº§åˆ†ç±»IDï¼›èšåˆå…¶æ‰€æœ‰äºŒçº§åˆ†ç±»ä¸‹çš„æˆæœè¿›è¡Œåˆ†é¡µï¼ˆä¼ æ­¤å‚æ•°æ—¶æ— éœ€å†ä¼  categoryIdï¼‰

  - dateStart (date): å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šyyyy-MM-dd
  - dateEnd (date): ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šyyyy-MM-dd
  - authorName (string): ä½œè€…å§“åï¼ˆæ¨¡ç³Šæœç´¢ï¼ŒåŒ¹é…ä¸­æ–‡å/è‹±æ–‡åï¼‰
  - pageNum (int): é¡µç ï¼Œé»˜è®¤1
  - authorUserId (long): å†…éƒ¨ä½œè€…ç”¨æˆ·IDï¼ˆç²¾ç¡®åŒ¹é…ï¼Œæ¨èåœ¨â€œä¸ªäººé¡µâ€ä½¿ç”¨ï¼‰

  - pageSize (int): æ¯é¡µå¤§å°ï¼Œé»˜è®¤10
- è¿”å›ï¼šPageDTO<PublicAchievementDTO>
- ç¤ºä¾‹ï¼š
  ```
  GET /open/achievements?authorName=å¼ ä¸‰&type=1&pageNum=1&pageSize=10
  ```

### 7.1.1 å‰ç«¯å¯¹æ¥å­—æ®µè¡¨ï¼ˆé¡¶éƒ¨æ¨¡å—ä¸å·¦ä¾§åˆ†ç±»ï¼‰
- é¡¶éƒ¨æ¨¡å—ï¼ˆåˆ‡æ¢â€œå®éªŒå®¤æˆæœ/å®éªŒå®¤é¡¹ç›®â€ï¼‰
  - å®éªŒå®¤æˆæœï¼ˆè®ºæ–‡å¤§ç±»ï¼‰ï¼šparentCategoryId = <è®ºæ–‡ä¸€çº§åˆ†ç±»ID>
  - å®éªŒå®¤é¡¹ç›®ï¼ˆé¡¹ç›®å¤§ç±»ï¼‰ï¼šparentCategoryId = <é¡¹ç›®ä¸€çº§åˆ†ç±»ID>
  - åˆ†é¡µï¼špageNum, pageSize
- å·¦ä¾§äºŒçº§åˆ†ç±»ç‚¹å‡»ç­›é€‰
  - categoryId = <äºŒçº§åˆ†ç±»ID>
  - åˆ†é¡µï¼špageNum, pageSize
- è·å–åˆ†ç±»IDï¼š
  - ä¸€çº§ä¸å­ç±»æ ‘ï¼šGET /open/achievement-categories
  - æŒ‡å®šä¸€çº§ä¸‹çš„äºŒçº§ï¼šGET /open/achievement-categories/children?parentId=<ä¸€çº§ID>
- å»ºè®®ï¼šå½“ä¼ å…¥ parentCategoryId æˆ– categoryId æ—¶ï¼Œä¸å†ä¼  typeï¼ˆtype ä¸ºå…¼å®¹å‚æ•°ï¼Œé¿å…è¯¯ç­›é€‰ï¼‰ã€‚

ç¤ºä¾‹ï¼š
```
# é¡¶éƒ¨â€œå®éªŒå®¤æˆæœâ€ï¼ˆè®ºæ–‡å¤§ç±»ï¼‰
GET /open/achievements?parentCategoryId=<è®ºæ–‡ä¸€çº§ID>&pageNum=1&pageSize=20

# é¡¶éƒ¨â€œå®éªŒå®¤é¡¹ç›®â€ï¼ˆé¡¹ç›®å¤§ç±»ï¼‰
GET /open/achievements?parentCategoryId=<é¡¹ç›®ä¸€çº§ID>&pageNum=1&pageSize=20

# å·¦ä¾§ç‚¹å‡»æŸä¸ªäºŒçº§åˆ†ç±»
GET /open/achievements?categoryId=<äºŒçº§ID>&pageNum=1&pageSize=20

è®ºæ–‡ä¸€çº§id=1
é¡¹ç›®ä¸€çº§id=2



```


7.2 å…¬å¼€æˆæœè¯¦æƒ…
- GET /open/achievements/{id}
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- æ›´æ–°æ—¥æœŸï¼š2025-10-14
- è¯´æ˜ï¼šè·å–å•ä¸ªæˆæœçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«è¿‡æ»¤åçš„ä½œè€…åˆ—è¡¨
- è·¯å¾„å‚æ•°ï¼š
  - id (long): æˆæœID
- è¿”å›ï¼šPublicAchievementDTO
- ç¤ºä¾‹ï¼š
  ```
  GET /open/achievements/123
  ```

7.3 å…¬å¼€ç”¨æˆ·åˆ—è¡¨
- GET /open/users?identity=&academicStatus=&keyword=&pageNum=&pageSize=
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- è¯´æ˜ï¼šè·å–å®éªŒå®¤æˆå‘˜ä¿¡æ¯ï¼Œä»…è¿”å›å…¬å¼€å­—æ®µ
- è¯·æ±‚å‚æ•°ï¼ˆQueryï¼Œå‡å¯é€‰ï¼‰ï¼š
  - identity (int): èº«ä»½ï¼Œ1=ç®¡ç†å‘˜ï¼Œ2=æ•™å¸ˆï¼Œ3=å­¦ç”Ÿ
  - academicStatus (int): å­¦æœ¯èº«ä»½ï¼ˆ0-6ï¼‰
  - keyword (string): å…³é”®è¯ï¼ŒåŒ¹é…å§“å/è‹±æ–‡å/ç ”ç©¶æ–¹å‘
  - pageNum (int): é¡µç ï¼Œé»˜è®¤1
  - pageSize (int): æ¯é¡µå¤§å°ï¼Œé»˜è®¤1000
- è¿”å›ï¼šPageDTO<PublicLabUserDTO>

7.4 å…¬å¼€ç”¨æˆ·è¯¦æƒ…
- GET /open/users/{id}
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- è¯´æ˜ï¼šè·å–å•ä¸ªç”¨æˆ·çš„å…¬å¼€ä¿¡æ¯
- è·¯å¾„å‚æ•°ï¼š
  - id (long): ç”¨æˆ·ID
- è¿”å›ï¼šPublicLabUserDTO


7.5 å…¬å¼€åˆ†ç±»æ ‘ï¼ˆä¸€çº§+äºŒçº§ï¼‰
- GET /open/achievement-categories?includeInactive=false&onlyLeaf=false
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- è¯´æ˜ï¼š
  - é»˜è®¤ä»…è¿”å›å¯ç”¨ä¸­çš„åˆ†ç±»æ ‘ï¼ˆisActive=true, deleted=falseï¼‰
  - includeInactive=true æ—¶å¯åŒ…å«æœªå¯ç”¨åˆ†ç±»
  -
  - onlyLeaf=true æ—¶ä¸è¿”å›æ ‘ï¼Œæ”¹ä¸ºâ€œäºŒçº§åˆ†ç±»æ‰å¹³åˆ—è¡¨â€ï¼ˆä¾¿äºå‰ç«¯æ¸²æŸ“ç­›é€‰é¡¹ï¼‰
- è¿”å›ï¼š
  - when onlyLeaf=falseï¼šList<LabAchievementCategoryDTO>ï¼ˆæ ‘ï¼‰
  - when onlyLeaf=trueï¼šList<LabAchievementCategoryDTO>ï¼ˆä»…äºŒçº§ï¼Œæ‰å¹³ï¼‰
- ç¤ºä¾‹ï¼š
```bash
curl -G "http://localhost:8080/open/achievement-categories" \
 --data-urlencode "includeInactive=false" \
 --data-urlencode "onlyLeaf=false"
```
- ç¤ºä¾‹è¿”å›ï¼ˆæ ‘ï¼Œæˆªæ–­ç¤ºä¾‹ï¼‰ï¼š
```json
[
  {"id":1,"categoryName":"è®ºæ–‡","children":[
    {"id":3,"parentId":1,"categoryName":"æœŸåˆŠè®ºæ–‡"},
    {"id":4,"parentId":1,"categoryName":"ä¼šè®®è®ºæ–‡"}
  ]},
  {"id":2,"categoryName":"é¡¹ç›®","children":[
    {"id":10,"parentId":2,"categoryName":"å›½å®¶é‡ç‚¹é¡¹ç›®"}
  ]}
]
```

7.6 å…¬å¼€æŒ‡å®šä¸€çº§åˆ†ç±»çš„äºŒçº§åˆ—è¡¨
- GET /open/achievement-categories/children?parentId={ä¸€çº§ID}&includeInactive=false
- æƒé™ï¼šå…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰
- è¯´æ˜ï¼šè¿”å›æŒ‡å®šçˆ¶åˆ†ç±»çš„ç›´æ¥å­åˆ†ç±»åˆ—è¡¨ï¼ˆé€šå¸¸ä¸ºäºŒçº§ï¼‰ã€‚
- è¯·æ±‚å‚æ•°ï¼š
  - parentId (long, å¿…å¡«)ï¼šçˆ¶åˆ†ç±»IDï¼ˆä¾‹å¦‚â€œè®ºæ–‡â€é¡¶çº§IDï¼‰
  - includeInactive (bool, å¯é€‰ï¼Œé»˜è®¤false)ï¼šæ˜¯å¦åŒ…å«æœªå¯ç”¨
- è¿”å›ï¼šList<LabAchievementCategoryDTO>
- ç¤ºä¾‹ï¼š
```bash
curl -G "http://localhost:8080/open/achievement-categories/children" \
 --data-urlencode "parentId=1" \
 --data-urlencode "includeInactive=false"
```
- ç¤ºä¾‹è¿”å›ï¼ˆæ‰å¹³ï¼Œæˆªæ–­ç¤ºä¾‹ï¼‰ï¼š
```json
[
  {"id":3,"parentId":1,"categoryName":"æœŸåˆŠè®ºæ–‡"},
  {"id":4,"parentId":1,"categoryName":"ä¼šè®®è®ºæ–‡"}
]
```

### æ•°æ®è¿‡æ»¤è§„åˆ™
- **æˆæœè¿‡æ»¤**ï¼šä»…è¿”å›æœªåˆ é™¤çš„æˆæœï¼ˆdeleted=falseï¼‰ï¼Œä¸é™åˆ¶å‘å¸ƒçŠ¶æ€
- **ä½œè€…è¿‡æ»¤**ï¼š
  - å¤–éƒ¨ä½œè€…ï¼šå…¨éƒ¨æ˜¾ç¤º
  - å†…éƒ¨ä½œè€…ï¼šå…¨éƒ¨æ˜¾ç¤ºï¼ˆvisibleå­—æ®µä»…å½±å“ä¸ªäººä¸»é¡µï¼Œä¸å½±å“å…¬å¼€å±•ç¤ºï¼‰
- **ç”¨æˆ·è¿‡æ»¤**ï¼šä»…è¿”å›æ¿€æ´»çŠ¶æ€çš„ç”¨æˆ·ï¼ˆis_active=true, deleted=falseï¼‰

### ç¼“å­˜ç­–ç•¥
- æ‰€æœ‰å…¬å¼€æ¥å£å·²é…ç½®60ç§’ç¼“å­˜ï¼Œé€‚åˆå¯¹å¤–å±•ç¤ºä½¿ç”¨

### æŒ‰ä½œè€…åæŸ¥è¯¢è¯´æ˜
- authorName å‚æ•°æ”¯æŒæ¨¡ç³Šæœç´¢ï¼Œä¼šåŒ¹é…ä»¥ä¸‹å­—æ®µï¼š
  - å¤–éƒ¨ä½œè€…çš„ name å’Œ name_en å­—æ®µ
  - å†…éƒ¨ä½œè€…çš„ name å’Œ name_en å­—æ®µ
  - å†…éƒ¨ä½œè€…å…³è”çš„ lab_user è¡¨ä¸­çš„ real_name å’Œ english_name å­—æ®µ
- ç¤ºä¾‹ç”¨æ³•ï¼š
  ```
  # æŸ¥æ‰¾æ‰€æœ‰æˆæœ
  GET /open/achievements
  # æŸ¥æ‰¾å¼ ä¸‰å‚ä¸çš„æ‰€æœ‰æˆæœ
  GET /open/achievements?authorName=å¼ ä¸‰

  # æŸ¥æ‰¾Johnå‚ä¸çš„è®ºæ–‡
  GET /open/achievements?authorName=John&type=1

  # æŸ¥æ‰¾æå››åœ¨2024å¹´å‚ä¸çš„æˆæœ
  GET /open/achievements?authorName=æå››&dateStart=2024-01-01&dateEnd=2024-12-31
  ```

---

## 8. å®éªŒå®¤ç”¨æˆ·ç®¡ç†ï¼ˆLab User Managementï¼‰

### 8.1 ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢

8.1.1 è·å–å½“å‰ç”¨æˆ·ä¸ªäººä¿¡æ¯
- GET /lab/users/profile
- æƒé™ï¼šç™»å½•ç”¨æˆ·
- è¯´æ˜ï¼šè·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¸ªäººä¿¡æ¯
- è¿”å›ï¼šLabUserProfileDTO

8.1.2 æ ¹æ®ç”¨æˆ·IDè·å–ä¸ªäººä¿¡æ¯
- GET /lab/users/{userId}
- æƒé™ï¼šç®¡ç†å‘˜æˆ–æœ¬äºº
- è¯´æ˜ï¼šç®¡ç†å‘˜å¯æŸ¥çœ‹ä»»ä½•ç”¨æˆ·ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¿”å›ï¼šLabUserProfileDTO

8.1.3 æ ¹æ®ç”¨æˆ·åè·å–ä¸ªäººä¿¡æ¯
- GET /lab/users/username/{username}
- æƒé™ï¼šç®¡ç†å‘˜æˆ–æœ¬äºº
- è¯´æ˜ï¼šé€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
- è·¯å¾„å‚æ•°ï¼šusername (string)
- è¿”å›ï¼šLabUserProfileDTO

8.1.4 æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
- GET /lab/users/{userId}/exists
- æƒé™ï¼šç™»å½•ç”¨æˆ·
- è¯´æ˜ï¼šéªŒè¯ç”¨æˆ·IDæ˜¯å¦å­˜åœ¨
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¿”å›ï¼šBoolean

8.1.5 æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
- GET /lab/users/username/{username}/exists
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šéªŒè¯ç”¨æˆ·åæ˜¯å¦å·²è¢«ä½¿ç”¨
- è·¯å¾„å‚æ•°ï¼šusername (string)
- è¿”å›ï¼šBoolean

8.1.6 å¥åº·æ£€æŸ¥
- GET /lab/users/test/health
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šæ£€æŸ¥ç”¨æˆ·æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- è¿”å›ï¼šStringï¼ˆæœåŠ¡çŠ¶æ€ä¿¡æ¯ï¼‰

### 8.2 ç”¨æˆ·CRUDç®¡ç†

8.2.1 åˆ›å»ºç”¨æˆ·
- POST /lab/users/crud
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜åˆ›å»ºæ–°ç”¨æˆ·
- è¯·æ±‚ä½“ï¼šCreateLabUserCommand
- è¿”å›ï¼šLongï¼ˆç”¨æˆ·IDï¼‰

8.2.2 åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
- GET /lab/users/crud/list?keyword=&identity=&academicStatus=&status=&pageNum=&pageSize=
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰
- è¯·æ±‚å‚æ•°ï¼ˆQueryï¼Œå‡å¯é€‰ï¼‰ï¼š
  - keyword (string): å…³é”®è¯ï¼ŒåŒ¹é…å§“å/ç”¨æˆ·å/å­¦å·
  - identity (int): èº«ä»½ï¼Œ1=ç®¡ç†å‘˜ï¼Œ2=æ•™å¸ˆï¼Œ3=å­¦ç”Ÿ
  - academicStatus (int): å­¦æœ¯èº«ä»½ï¼ˆ0-6ï¼‰
  - status (int): çŠ¶æ€ï¼Œ1=åœ¨è¯»/åœ¨èŒï¼Œ2=æ¯•ä¸š/ç¦»èŒ
  - pageNum (int): é¡µç ï¼Œé»˜è®¤1
  - pageSize (int): æ¯é¡µå¤§å°ï¼Œé»˜è®¤10
- è¿”å›ï¼šPageDTO<LabUserProfileDTO>

8.2.3 æœç´¢ç”¨æˆ·
- GET /lab/users/crud/search?keyword=
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šæ ¹æ®å…³é”®è¯æœç´¢ç”¨æˆ·ï¼ˆç”¨äºé€‰æ‹©å™¨ç»„ä»¶ï¼‰
- è¯·æ±‚å‚æ•°ï¼škeyword (string, å¿…å¡«)
- è¿”å›ï¼šList<LabUserProfileDTO>
- å­—æ®µï¼šåŒ…å« email/phone/studentNumberï¼Œä¾¿äºåŒºåˆ†é‡å

8.2.4 æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰
- PUT /lab/users/crud/{userId}
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜æ›´æ–°ä»»æ„ç”¨æˆ·ä¿¡æ¯
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¯·æ±‚ä½“ï¼šUpdateLabUserCommand
- è¿”å›ï¼šVoid

8.2.5 æ›´æ–°ä¸ªäººä¿¡æ¯
- PUT /lab/users/crud/profile
- æƒé™ï¼šç™»å½•ç”¨æˆ·
- è¯´æ˜ï¼šç”¨æˆ·æ›´æ–°è‡ªå·±çš„ä¸ªäººä¿¡æ¯
- è¯·æ±‚ä½“ï¼šUpdateProfileCommand
- è¿”å›ï¼šVoid

8.2.6 ä¿®æ”¹å¯†ç 
- PUT /lab/users/crud/password
- æƒé™ï¼šç™»å½•ç”¨æˆ·
- è¯´æ˜ï¼šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å¯†ç 
- è¯·æ±‚ä½“ï¼šChangePasswordCommand
- è¿”å›ï¼šVoid

8.2.7 ç®¡ç†å‘˜é‡ç½®ç”¨æˆ·å¯†ç 
- PUT /lab/users/crud/{userId}/password
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜é‡ç½®ç”¨æˆ·å¯†ç ï¼ˆæ— éœ€æ—§å¯†ç ï¼‰
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¯·æ±‚ä½“ï¼šResetLabUserPasswordCommand
- è¿”å›ï¼šVoid

8.2.8 åˆ é™¤ç”¨æˆ·
- DELETE /lab/users/crud/{userId}
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜åˆ é™¤ç”¨æˆ·ï¼ˆç¡¬åˆ é™¤ï¼‰
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¿”å›ï¼šVoid

8.2.9 æ‰¹é‡åˆ é™¤ç”¨æˆ·
- DELETE /lab/users/crud/batch
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜æ‰¹é‡åˆ é™¤ç”¨æˆ·ï¼ˆç¡¬åˆ é™¤ï¼‰
- è¯·æ±‚ä½“ï¼šList<Long>ï¼ˆç”¨æˆ·IDæ•°ç»„ï¼‰
- è¿”å›ï¼šVoid

8.2.10 æ‰¹é‡å¯ç”¨/ç¦ç”¨ç”¨æˆ·
- PUT /lab/users/crud/batch/status?isActive=
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜æ‰¹é‡å¯ç”¨æˆ–ç¦ç”¨ç”¨æˆ·
- è¯·æ±‚å‚æ•°ï¼šisActive (boolean)
- è¯·æ±‚ä½“ï¼šList<Long>ï¼ˆç”¨æˆ·IDæ•°ç»„ï¼‰
- è¿”å›ï¼šVoid

8.2.11 è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
- GET /lab/users/crud/statistics
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šè·å–ç”¨æˆ·èº«ä»½åˆ†å¸ƒç­‰ç»Ÿè®¡ä¿¡æ¯
- è¿”å›ï¼šMap<String, Object>

8.2.12 å¯¼å‡ºç”¨æˆ·åˆ—è¡¨
- GET /lab/users/crud/export
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šå¯¼å‡ºç”¨æˆ·åˆ—è¡¨åˆ°Excelï¼ˆåŠŸèƒ½å¾…å®ç°ï¼‰
- è¯·æ±‚å‚æ•°ï¼šåŒç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢å‚æ•°
- è¿”å›ï¼šString

8.2.13 å¯¼å…¥ç”¨æˆ·
- POST /lab/users/crud/import
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šä»Excelå¯¼å…¥ç”¨æˆ·ï¼ˆåŠŸèƒ½å¾…å®ç°ï¼‰
- è¿”å›ï¼šString

8.2.14 ä¸Šä¼ ç”¨æˆ·å¤´åƒ
- POST /lab/users/crud/profile/photo
- æƒé™ï¼šç™»å½•ç”¨æˆ·
- è¯´æ˜ï¼šç”¨æˆ·ä¸Šä¼ ä¸ªäººå¤´åƒ
- è¯·æ±‚å‚æ•°ï¼šphotofile (MultipartFile, å¿…å¡«)
- è¿”å›ï¼šUploadFileDTO
- å­˜å‚¨è·¯å¾„: /tmp/agileboot/profile/avatar/
- è®¿é—®è·¯å¾„: http://åŸŸå/profile/avatar/æ–‡ä»¶å
- ç¤ºä¾‹ï¼š
  ```
  POST /lab/users/crud/profile/photo
  Content-Type: multipart/form-data
  photofile: [å›¾ç‰‡æ–‡ä»¶]
  ```

8.2.15 ç®¡ç†å‘˜ä¸Šä¼ ç”¨æˆ·å¤´åƒ
- POST /lab/users/crud/{userId}/photo
- æƒé™ï¼šç®¡ç†å‘˜
- è¯´æ˜ï¼šç®¡ç†å‘˜ä¸ºæŒ‡å®šç”¨æˆ·ä¸Šä¼ å¤´åƒ
- è·¯å¾„å‚æ•°ï¼šuserId (long)
- è¯·æ±‚å‚æ•°ï¼šphotofile (MultipartFile, å¿…å¡«)
- è¿”å›ï¼šUploadFileDTO
- ç¤ºä¾‹ï¼š
  ```
  POST /lab/users/crud/123/photo
  Content-Type: multipart/form-data
  photofile: [å›¾ç‰‡æ–‡ä»¶]
  ```

### 8.3 å®éªŒå®¤å­—å…¸æ¥å£

8.3.1 å­¦æœ¯èº«ä»½å­—å…¸
- GET /lab/dicts/academic-status
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šè¿”å›å­¦æœ¯èº«ä»½å¯é€‰é¡¹
- è¿”å›ï¼šList<DictItem>
- å­—å…¸å€¼ï¼š
  - 0: å®éªŒå®¤è´Ÿè´£äºº
  - 1: æ•™æˆ
  - 2: å‰¯æ•™æˆ
  - 3: è®²å¸ˆ
  - 4: åšå£«ç ”ç©¶ç”Ÿ
  - 5: ç¡•å£«ç ”ç©¶ç”Ÿ
  - 6: æœ¬ç§‘ç”Ÿ

8.3.2 èº«ä»½ç±»å‹å­—å…¸
- GET /lab/dicts/identity
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šè¿”å›èº«ä»½ç±»å‹å¯é€‰é¡¹
- è¿”å›ï¼šList<DictItem>
- å­—å…¸å€¼ï¼š
  - 1: ç®¡ç†å‘˜
  - 2: æ•™å¸ˆ
  - 3: å­¦ç”Ÿ

8.3.3 ç”¨æˆ·çŠ¶æ€å­—å…¸
- GET /lab/dicts/user-status
- æƒé™ï¼šæ— éœ€è®¤è¯
- è¯´æ˜ï¼šè¿”å›ç”¨æˆ·çŠ¶æ€å¯é€‰é¡¹
- è¿”å›ï¼šList<DictItem>
- å­—å…¸å€¼ï¼š
  - 1: åœ¨è¯»/åœ¨èŒ
  - 2: æ¯•ä¸š/ç¦»èŒ

### 8.4 æ•°æ®ç»“æ„è¯´æ˜

#### LabUserProfileDTOï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰
```json
{
  "id": 1,
  "studentNumber": "2021001",
  "username": "zhangsan",
  "realName": "å¼ ä¸‰",
  "englishName": "Zhang San",
  "gender": 1,
  "identity": 2,
  "academicStatus": 1,
  "researchArea": "äººå·¥æ™ºèƒ½",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "status": 1,
  "enrollmentYear": "2021",
  "graduationYear": null,
  "graduationDest": null,
  "photo": "/profile/upload/photo.jpg",
  "resume": "ä¸ªäººç®€å†...",
  "homepageUrl": "https://example.com",
  "orcid": "0000-0000-0000-0000",
  "isActive": true,
  "createTime": "2024-01-01T00:00:00"
}
```

#### CreateLabUserCommandï¼ˆåˆ›å»ºç”¨æˆ·ï¼‰
```json
{
  "studentNumber": "2024001",
  "username": "newuser",
  "realName": "æ–°ç”¨æˆ·",
  "englishName": "New User",
  "password": "123456",
  "gender": 1,
  "identity": 3,
  "academicStatus": 5,
  "researchArea": "æœºå™¨å­¦ä¹ ",
  "phone": "13900139000",
  "email": "newuser@example.com",
  "enrollmentYear": "2024"
}
```

#### UpdateProfileCommandï¼ˆæ›´æ–°ä¸ªäººä¿¡æ¯ï¼‰
```json
{
  "realName": "å¼ ä¸‰",
  "englishName": "Zhang San",
  "gender": 1,
  "researchArea": "æ·±åº¦å­¦ä¹ ",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "photo": "/profile/upload/new_photo.jpg",
  "resume": "æ›´æ–°åçš„ç®€å†...",
  "homepageUrl": "https://newsite.com",
  "orcid": "0000-0000-0000-0001"
}
```

#### ChangePasswordCommandï¼ˆä¿®æ”¹å¯†ç ï¼‰
```json
{
  "oldPassword": "oldpass123",
  "newPassword": "newpass456"
}
```

#### UploadFileDTOï¼ˆæ–‡ä»¶ä¸Šä¼ å“åº”ï¼‰
```json
{
  "imgUrl": "/profile/avatar/20241207143022_photo_abc123.jpg"
}
```

### 8.5 æƒé™è¯´æ˜

#### æƒé™æ ‡è¯†
- `lab:user:list`: æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
- `lab:user:query`: æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…
- `lab:user:add`: åˆ›å»ºç”¨æˆ·
- `lab:user:edit`: ç¼–è¾‘ç”¨æˆ·
- `lab:user:remove`: åˆ é™¤ç”¨æˆ·
- `lab:user:export`: å¯¼å‡ºç”¨æˆ·
- `lab:user:import`: å¯¼å…¥ç”¨æˆ·

#### ç‰¹æ®Šæƒé™æ£€æŸ¥
- `@labUserPermission.isAdmin()`: æ£€æŸ¥æ˜¯å¦ä¸ºå®éªŒå®¤ç®¡ç†å‘˜
- `@labUserPermission.canViewUser(#userId)`: æ£€æŸ¥æ˜¯å¦å¯ä»¥æŸ¥çœ‹æŒ‡å®šç”¨æˆ·
- `@labUserPermission.canViewUserByUsername(#username)`: æ£€æŸ¥æ˜¯å¦å¯ä»¥æŸ¥çœ‹æŒ‡å®šç”¨æˆ·åçš„ç”¨æˆ·

### 8.6 ä¸šåŠ¡è§„åˆ™

#### ç”¨æˆ·åˆ›å»ºè§„åˆ™
1. **ç”¨æˆ·åå”¯ä¸€æ€§**: ç³»ç»Ÿå†…ç”¨æˆ·åå¿…é¡»å”¯ä¸€
2. **å­¦å·å”¯ä¸€æ€§**: å­¦å·ä¸èƒ½é‡å¤ï¼ˆå¯ä¸ºç©ºï¼‰
3. **æ‰‹æœºå·å”¯ä¸€æ€§**: æ‰‹æœºå·ä¸èƒ½é‡å¤ï¼ˆå¯ä¸ºç©ºï¼‰
4. **é‚®ç®±å”¯ä¸€æ€§**: é‚®ç®±ä¸èƒ½é‡å¤ï¼ˆå¯ä¸ºç©ºï¼‰
5. **é»˜è®¤å¯†ç **: åˆ›å»ºç”¨æˆ·æ—¶å¯†ç ä¸º6-20ä½å­—ç¬¦

#### æƒé™æ§åˆ¶è§„åˆ™
1. **ç®¡ç†å‘˜æƒé™**: å¯ä»¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·
2. **ä¸ªäººä¿¡æ¯**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹å’Œä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯
3. **å¯†ç å®‰å…¨**: ä¿®æ”¹å¯†ç éœ€è¦éªŒè¯æ—§å¯†ç 
4. **è´¦å·çŠ¶æ€**: ç¦ç”¨çš„è´¦å·æ— æ³•ç™»å½•

#### æ•°æ®å®Œæ•´æ€§è§„åˆ™
1. **è½¯åˆ é™¤**: åˆ é™¤ç”¨æˆ·æ—¶ä¿ç•™å†å²æ•°æ®
2. **å…³è”æ•°æ®**: åˆ é™¤ç”¨æˆ·å‰éœ€è¦å¤„ç†å…³è”çš„æˆæœæ•°æ®
3. **çŠ¶æ€ç®¡ç†**: æ¯•ä¸š/ç¦»èŒç”¨æˆ·ä¿ç•™æ•°æ®ä½†æ ‡è®°çŠ¶æ€

#### æ–‡ä»¶ä¸Šä¼ è§„åˆ™
1. **å¤´åƒä¸Šä¼ **: æ”¯æŒjpgã€jpegã€pngã€gifã€bmpæ ¼å¼
2. **æ–‡ä»¶å¤§å°**: æœ€å¤§50MB
3. **ç»å¯¹å­˜å‚¨è·¯å¾„**: `/tmp/agileboot/profile/avatar/` (å¼€å‘ç¯å¢ƒ)
4. **è®¿é—®URL**: `http://localhost:8080/profile/avatar/æ–‡ä»¶å`
5. **æ•°æ®åº“å­˜å‚¨**: ç›¸å¯¹è·¯å¾„æ ¼å¼ `/profile/avatar/æ–‡ä»¶å`
6. **æƒé™æ§åˆ¶**: ç”¨æˆ·åªèƒ½ä¸Šä¼ è‡ªå·±çš„å¤´åƒï¼Œç®¡ç†å‘˜å¯ä»¥ä¸ºä»»ä½•ç”¨æˆ·ä¸Šä¼ 
7. **æ–‡ä»¶å‘½å**: è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼Œæ ¼å¼ï¼š`æ—¶é—´æˆ³_åŸæ–‡ä»¶å_UUID.æ‰©å±•å`
8. **è·¯å¾„é…ç½®**: é€šè¿‡ `agileboot.file-base-dir` é…ç½®åŸºç¡€è·¯å¾„ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ä¿®æ”¹

---

## 9. å¸ˆç”Ÿå…³ç³»ç®¡ç†ï¼ˆTeacher-Student Relationshipï¼‰

### 9.1 å¸ˆç”Ÿå…³ç³»CRUDç®¡ç†

9.1.1 åˆ›å»ºå¸ˆç”Ÿå…³ç³»
- **æ¥å£åœ°å€**: `POST /lab/users/relationships`
- **æƒé™**: ç®¡ç†å‘˜ (`lab:user:relationship:create`)
- **è¯´æ˜**: å»ºç«‹å¯¼å¸ˆä¸å­¦ç”Ÿçš„æŒ‡å¯¼å…³ç³»
- **è¯·æ±‚ä½“**: CreateUserRelationshipCommand
```json
{
  "teacherId": 38,
  "studentId": 29,
  "relationshipType": 1,
  "startDate": "2025-09-11",
  "remark": "æµ‹è¯•å¸ˆç”Ÿå…³ç³»-åˆ˜ç§€ç£Šå¯¼å¸ˆæŒ‡å¯¼æé‡‘å³°"
}
```
- **è¿”å›**: Longï¼ˆå…³ç³»IDï¼‰
- **ä¸šåŠ¡è§„åˆ™**ï¼š
  - åªæœ‰èº«ä»½ä¸º"æ•™å¸ˆ"çš„ç”¨æˆ·æ‰èƒ½ä½œä¸ºå¯¼å¸ˆ
  - åªæœ‰èº«ä»½ä¸º"å­¦ç”Ÿ"çš„ç”¨æˆ·æ‰èƒ½ä½œä¸ºå­¦ç”Ÿ
  - ä¸€ä¸ªå­¦ç”ŸåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ´»è·ƒçš„å¯¼å¸ˆ
  - ä¸€ä¸ªå¯¼å¸ˆå¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿ
  - ä¸èƒ½å»ºç«‹è‡ªå·±ä¸è‡ªå·±çš„å¸ˆç”Ÿå…³ç³»

9.1.2 è§£é™¤å¸ˆç”Ÿå…³ç³»ï¼ˆç¡¬åˆ é™¤ï¼‰
- **æ¥å£åœ°å€**: `DELETE /lab/users/relationships/teacher/{teacherId}/student/{studentId}`
- **æƒé™**: ç®¡ç†å‘˜ (`lab:user:relationship:delete`)
- **è¯´æ˜**: è§£é™¤å¯¼å¸ˆä¸å­¦ç”Ÿçš„æŒ‡å¯¼å…³ç³»ï¼ˆæ°¸ä¹…åˆ é™¤è®°å½•ï¼‰
- **è·¯å¾„å‚æ•°**ï¼š
  - `teacherId` (long): å¯¼å¸ˆID
  - `studentId` (long): å­¦ç”ŸID
- **è¿”å›**: Void
- **æ³¨æ„**: âš ï¸ æ­¤æ“ä½œä¸ºç¡¬åˆ é™¤ï¼Œè®°å½•å°†è¢«æ°¸ä¹…åˆ é™¤ä¸”æ— æ³•æ¢å¤

9.1.3 è·å–å¯¼å¸ˆçš„å­¦ç”Ÿåˆ—è¡¨
- **æ¥å£åœ°å€**: `GET /lab/users/relationships/teacher/{teacherId}/students`
- **æƒé™**: ç®¡ç†å‘˜æˆ–å¯¼å¸ˆæœ¬äºº (`lab:user:relationship:query`)
- **è¯´æ˜**: è·å–æŒ‡å®šå¯¼å¸ˆçš„æ‰€æœ‰å­¦ç”Ÿ
- **è·¯å¾„å‚æ•°**: `teacherId` (long)
- **æŸ¥è¯¢å‚æ•°**: `status` (int, å¯é€‰) - å…³ç³»çŠ¶æ€ï¼š1=æ´»è·ƒ,2=å·²ç»“æŸï¼Œä¸ä¼ æŸ¥è¯¢æ‰€æœ‰
- **è¿”å›**: List<UserRelationshipDTO>

9.1.4 è·å–å­¦ç”Ÿçš„å¯¼å¸ˆä¿¡æ¯
- **æ¥å£åœ°å€**: `GET /lab/users/relationships/student/{studentId}/supervisor`
- **æƒé™**: ç®¡ç†å‘˜æˆ–å­¦ç”Ÿæœ¬äºº (`lab:user:relationship:query`)
- **è¯´æ˜**: è·å–æŒ‡å®šå­¦ç”Ÿçš„å¯¼å¸ˆä¿¡æ¯
- **è·¯å¾„å‚æ•°**: `studentId` (long)
- **æŸ¥è¯¢å‚æ•°**: `status` (int, å¯é€‰) - å…³ç³»çŠ¶æ€ï¼š1=æ´»è·ƒ,2=å·²ç»“æŸï¼Œä¸ä¼ æŸ¥è¯¢æ‰€æœ‰
- **è¿”å›**: UserRelationshipDTO

9.1.5 æ›´æ¢å­¦ç”Ÿçš„å¯¼å¸ˆ
- **æ¥å£åœ°å€**: `PUT /lab/users/relationships/student/{studentId}/supervisor/{newTeacherId}`
- **æƒé™**: ç®¡ç†å‘˜ (`lab:user:relationship:update`)
- **è¯´æ˜**: æ›´æ¢å­¦ç”Ÿçš„å¯¼å¸ˆï¼ˆç»“æŸæ—§å…³ç³»ï¼Œåˆ›å»ºæ–°å…³ç³»ï¼‰
- **è·¯å¾„å‚æ•°**ï¼š
  - `studentId` (long): å­¦ç”ŸID
  - `newTeacherId` (long): æ–°å¯¼å¸ˆID
- **æŸ¥è¯¢å‚æ•°**: `remark` (string, å¯é€‰) - å¤‡æ³¨ä¿¡æ¯
- **è¿”å›**: Longï¼ˆæ–°å…³ç³»IDï¼‰

9.1.6 ä¸ºå¯¼å¸ˆæ·»åŠ å­¦ç”Ÿï¼ˆå¿«æ·æ–¹å¼ï¼‰
- **æ¥å£åœ°å€**: `POST /lab/users/relationships/teacher/{teacherId}/student/{studentId}`
- **æƒé™**: ç®¡ç†å‘˜ (`lab:user:relationship:create`)
- **è¯´æ˜**: å¿«æ·æ–¹å¼ä¸ºå¯¼å¸ˆæ·»åŠ å­¦ç”Ÿ
- **è·¯å¾„å‚æ•°**ï¼š
  - `teacherId` (long): å¯¼å¸ˆID
  - `studentId` (long): å­¦ç”ŸID
- **æŸ¥è¯¢å‚æ•°**: `remark` (string, å¯é€‰) - å¤‡æ³¨ä¿¡æ¯
- **è¿”å›**: Longï¼ˆå…³ç³»IDï¼‰

9.1.7 è·å–æ´»è·ƒçš„å¯¼å¸ˆå­¦ç”Ÿåˆ—è¡¨
- **æ¥å£åœ°å€**: `GET /lab/users/relationships/teacher/{teacherId}/active-students`
- **æƒé™**: ç®¡ç†å‘˜æˆ–å¯¼å¸ˆæœ¬äºº (`lab:user:relationship:query`)
- **è¯´æ˜**: è·å–æŒ‡å®šå¯¼å¸ˆçš„æ´»è·ƒå­¦ç”Ÿåˆ—è¡¨
- **è·¯å¾„å‚æ•°**: `teacherId` (long)
- **è¿”å›**: List<UserRelationshipDTO>

9.1.8 è·å–å­¦ç”Ÿçš„æ´»è·ƒå¯¼å¸ˆ
- **æ¥å£åœ°å€**: `GET /lab/users/relationships/student/{studentId}/active-supervisor`
- **æƒé™**: ç®¡ç†å‘˜æˆ–å­¦ç”Ÿæœ¬äºº (`lab:user:relationship:query`)
- **è¯´æ˜**: è·å–æŒ‡å®šå­¦ç”Ÿçš„æ´»è·ƒå¯¼å¸ˆä¿¡æ¯
- **è·¯å¾„å‚æ•°**: `studentId` (long)
- **è¿”å›**: UserRelationshipDTO

### 9.2 æ•°æ®ç»“æ„è¯´æ˜

#### CreateUserRelationshipCommandï¼ˆåˆ›å»ºå¸ˆç”Ÿå…³ç³»ï¼‰
```json
{
  "teacherId": 38,
  "studentId": 29,
  "relationshipType": 1,
  "startDate": "2025-09-11",
  "remark": "æµ‹è¯•å¸ˆç”Ÿå…³ç³»-åˆ˜ç§€ç£Šå¯¼å¸ˆæŒ‡å¯¼æé‡‘å³°"
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `teacherId` (long, å¿…å¡«): å¯¼å¸ˆç”¨æˆ·ID
- `studentId` (long, å¿…å¡«): å­¦ç”Ÿç”¨æˆ·ID
- `relationshipType` (int, å¯é€‰): å…³ç³»ç±»å‹ï¼Œé»˜è®¤ä¸º1ï¼ˆå¯¼å¸ˆå…³ç³»ï¼‰
- `startDate` (string, å¯é€‰): å…³ç³»å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šyyyy-MM-ddï¼Œé»˜è®¤ä¸ºå½“å‰æ—¥æœŸ
- `remark` (string, å¯é€‰): å¤‡æ³¨ä¿¡æ¯

#### UserRelationshipDTOï¼ˆå¸ˆç”Ÿå…³ç³»ä¿¡æ¯ï¼‰
```json
{
  "id": 4,
  "teacherId": 38,
  "studentId": 27,
  "relationshipType": 1,
  "relationshipTypeDesc": "å¯¼å¸ˆå…³ç³»",
  "startDate": "2025-09-11",
  "endDate": null,
  "status": 1,
  "statusDesc": "æ´»è·ƒ",
  "remark": "æµ‹è¯•å¸ˆç”Ÿå…³ç³»-åˆ˜ç§€ç£Šå¯¼å¸ˆæŒ‡å¯¼é‚¹å‡Œé¾™",
  "teacher": {
    "id": 38,
    "realName": "åˆ˜ç§€ç£Š",
    "englishName": "",
    "gender": 1,
    "identity": 2,
    "academicStatus": 0,
    "researchArea": "",
    "phone": null,
    "email": null
  },
  "student": {
    "id": 27,
    "realName": "é‚¹å‡Œé¾™",
    "englishName": "Linglong Zou",
    "gender": 1,
    "identity": 3,
    "academicStatus": 5,
    "researchArea": "è™šæ‹Ÿç°å®ï¼Œæ¸¸æˆå®¢æˆ·ç«¯",
    "phone": "19942300457",
    "enrollmentYear": "2023",
    "graduationYear": "2026",
    "email": "zll749486310@163.com"
  },
  "createTime": "2025-09-11T15:22:42.000+08:00",
  "updateTime": "2025-09-11T07:22:42.000+08:00"
}
```

### 9.3 å…³ç³»ç±»å‹ä¸çŠ¶æ€

#### å…³ç³»ç±»å‹æšä¸¾
- `SUPERVISOR(1, "å¯¼å¸ˆå…³ç³»")`: å¯¼å¸ˆä¸å­¦ç”Ÿçš„æŒ‡å¯¼å…³ç³»

#### å…³ç³»çŠ¶æ€æšä¸¾
- `ACTIVE(1, "æ´»è·ƒ")`: å½“å‰æœ‰æ•ˆçš„å¸ˆç”Ÿå…³ç³»
- `ENDED(2, "å·²ç»“æŸ")`: å·²ç»“æŸçš„å¸ˆç”Ÿå…³ç³»ï¼ˆå¦‚å­¦ç”Ÿæ¯•ä¸šï¼‰

#### ç”¨æˆ·èº«ä»½æšä¸¾
- `ADMIN(1, "ç®¡ç†å‘˜")`: ç³»ç»Ÿç®¡ç†å‘˜
- `TEACHER(2, "æ•™å¸ˆ")`: æ•™å¸ˆ/å¯¼å¸ˆ
- `STUDENT(3, "å­¦ç”Ÿ")`: å­¦ç”Ÿ

#### å­¦æœ¯çŠ¶æ€æšä¸¾
- `PROFESSOR(0, "æ•™æˆ")`: æ•™æˆ
- `ASSOCIATE_PROFESSOR(1, "å‰¯æ•™æˆ")`: å‰¯æ•™æˆ
- `LECTURER(2, "è®²å¸ˆ")`: è®²å¸ˆ
- `POSTDOC(3, "åšå£«å")`: åšå£«å
- `PHD(4, "åšå£«")`: åšå£«ç ”ç©¶ç”Ÿ
- `MASTER(5, "ç¡•å£«")`: ç¡•å£«ç ”ç©¶ç”Ÿ
- `UNDERGRADUATE(6, "æœ¬ç§‘ç”Ÿ")`: æœ¬ç§‘ç”Ÿ

### 9.4 æµ‹è¯•ç¤ºä¾‹

#### ç™»å½•è·å–Token
```bash
curl -X POST "http://localhost:8080/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

#### åˆ›å»ºå¸ˆç”Ÿå…³ç³»
```bash
curl -X POST "http://localhost:8080/lab/users/relationships" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "teacherId": 38,
    "studentId": 29,
    "relationshipType": 1,
    "startDate": "2025-09-11",
    "remark": "æµ‹è¯•å¸ˆç”Ÿå…³ç³»"
  }'
```

#### è·å–å¯¼å¸ˆçš„å­¦ç”Ÿåˆ—è¡¨
```bash
curl -X GET "http://localhost:8080/lab/users/relationships/teacher/38/students" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### è·å–å­¦ç”Ÿçš„å¯¼å¸ˆä¿¡æ¯
```bash
curl -X GET "http://localhost:8080/lab/users/relationships/student/29/supervisor" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### åˆ é™¤å¸ˆç”Ÿå…³ç³»ï¼ˆç¡¬åˆ é™¤ï¼‰
```bash
curl -X DELETE "http://localhost:8080/lab/users/relationships/teacher/38/student/29" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### å¿«æ·æ·»åŠ å­¦ç”Ÿ
```bash
curl -X POST "http://localhost:8080/lab/users/relationships/teacher/26/student/28" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d "remark=å¿«æ·æ·»åŠ å¸ˆç”Ÿå…³ç³»"
```

### 9.5 æƒé™æ§åˆ¶

#### æƒé™æ ‡è¯†
- `lab:user:relationship:create`: åˆ›å»ºå¸ˆç”Ÿå…³ç³»
- `lab:user:relationship:delete`: åˆ é™¤å¸ˆç”Ÿå…³ç³»
- `lab:user:relationship:query`: æŸ¥è¯¢å¸ˆç”Ÿå…³ç³»
- `lab:user:relationship:update`: ä¿®æ”¹å¸ˆç”Ÿå…³ç³»

#### ç‰¹æ®Šæƒé™æ£€æŸ¥
- **ç®¡ç†å‘˜**: æ‹¥æœ‰ `*:*:*` æƒé™ï¼Œå¯ä»¥ç®¡ç†æ‰€æœ‰å¸ˆç”Ÿå…³ç³»
- **å¯¼å¸ˆ**: å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„å­¦ç”Ÿåˆ—è¡¨ï¼ˆéœ€è¦é¢å¤–çš„æƒé™æ£€æŸ¥ï¼‰
- **å­¦ç”Ÿ**: å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„å¯¼å¸ˆä¿¡æ¯ï¼ˆéœ€è¦é¢å¤–çš„æƒé™æ£€æŸ¥ï¼‰

### 9.6 ä¸šåŠ¡è§„åˆ™

#### å…³ç³»å»ºç«‹è§„åˆ™
1. **èº«ä»½éªŒè¯**: å¯¼å¸ˆå¿…é¡»æ˜¯æ•™å¸ˆèº«ä»½ï¼ˆidentity=2ï¼‰ï¼Œå­¦ç”Ÿå¿…é¡»æ˜¯å­¦ç”Ÿèº«ä»½ï¼ˆidentity=3ï¼‰
2. **å”¯ä¸€æ€§çº¦æŸ**: ä¸€ä¸ªå­¦ç”ŸåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ´»è·ƒçš„å¯¼å¸ˆ
3. **è‡ªå¼•ç”¨æ£€æŸ¥**: ä¸èƒ½å»ºç«‹è‡ªå·±ä¸è‡ªå·±çš„å¸ˆç”Ÿå…³ç³»
4. **çŠ¶æ€ç®¡ç†**: æ–°å»ºå…³ç³»é»˜è®¤ä¸ºæ´»è·ƒçŠ¶æ€ï¼ˆstatus=1ï¼‰

#### å…³ç³»ç®¡ç†è§„åˆ™
1. **ç¡¬åˆ é™¤**: âš ï¸ è§£é™¤å…³ç³»æ—¶ä½¿ç”¨ç¡¬åˆ é™¤ï¼Œè®°å½•å°†è¢«æ°¸ä¹…åˆ é™¤ä¸”æ— æ³•æ¢å¤
2. **æ•°æ®ä¸€è‡´æ€§**: åˆ é™¤åæ‰€æœ‰ç›¸å…³æŸ¥è¯¢éƒ½ä¼šæ­£ç¡®æ›´æ–°
3. **çº§è”æŸ¥è¯¢**: æŸ¥è¯¢æ—¶è‡ªåŠ¨å…³è”ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
4. **æƒé™éš”ç¦»**: ç”¨æˆ·åªèƒ½æŸ¥çœ‹ä¸è‡ªå·±ç›¸å…³çš„å¸ˆç”Ÿå…³ç³»

#### é‡è¦æ³¨æ„äº‹é¡¹
- âš ï¸ **ç¡¬åˆ é™¤é£é™©**: åˆ é™¤æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…æ“ä½œ
- ğŸ“Š **æ•°æ®å®Œæ•´æ€§**: åˆ é™¤å‰å»ºè®®å¤‡ä»½é‡è¦æ•°æ®
- ğŸ”’ **æƒé™æ§åˆ¶**: åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ‰§è¡Œåˆ é™¤æ“ä½œ

### 9.7 æ•°æ®åº“è®¾è®¡

#### lab_user_relationship è¡¨ç»“æ„ï¼ˆç¡¬åˆ é™¤ç‰ˆæœ¬ï¼‰
```sql
CREATE TABLE lab_user_relationship (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'å…³ç³»ID',
  teacher_id BIGINT NOT NULL COMMENT 'å¯¼å¸ˆID',
  student_id BIGINT NOT NULL COMMENT 'å­¦ç”ŸID',
  relationship_type TINYINT DEFAULT 1 COMMENT 'å…³ç³»ç±»å‹ï¼š1=å¯¼å¸ˆå…³ç³»',
  start_date DATE COMMENT 'å…³ç³»å¼€å§‹æ—¶é—´',
  end_date DATE COMMENT 'å…³ç³»ç»“æŸæ—¶é—´',
  status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1=æ´»è·ƒ,2=å·²ç»“æŸ',
  remark VARCHAR(255) COMMENT 'å¤‡æ³¨ä¿¡æ¯',

  -- å®¡è®¡å­—æ®µ
  creator_id BIGINT COMMENT 'åˆ›å»ºè€…ID',
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  updater_id BIGINT COMMENT 'æ›´æ–°è€…ID',
  update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',

  -- ç´¢å¼•å’Œçº¦æŸ
  UNIQUE KEY uk_teacher_student (teacher_id, student_id) COMMENT 'å¯¼å¸ˆå­¦ç”Ÿå”¯ä¸€çº¦æŸ',
  KEY idx_teacher (teacher_id) COMMENT 'å¯¼å¸ˆç´¢å¼•',
  KEY idx_student (student_id) COMMENT 'å­¦ç”Ÿç´¢å¼•',
  KEY idx_status (status) COMMENT 'çŠ¶æ€ç´¢å¼•',
  KEY idx_teacher_status (teacher_id, status) COMMENT 'å¯¼å¸ˆçŠ¶æ€å¤åˆç´¢å¼•',
  KEY idx_student_status (student_id, status) COMMENT 'å­¦ç”ŸçŠ¶æ€å¤åˆç´¢å¼•',
  KEY idx_active_relationships (status, teacher_id, student_id) COMMENT 'æ´»è·ƒå…³ç³»å¤åˆç´¢å¼•',
  KEY idx_create_time (create_time) COMMENT 'åˆ›å»ºæ—¶é—´ç´¢å¼•',

  -- å¤–é”®çº¦æŸ
  CONSTRAINT fk_teacher FOREIGN KEY (teacher_id) REFERENCES lab_user(id) ON DELETE CASCADE,
  CONSTRAINT fk_student FOREIGN KEY (student_id) REFERENCES lab_user(id) ON DELETE CASCADE
) COMMENT='å¸ˆç”Ÿå…³ç³»è¡¨ï¼ˆç¡¬åˆ é™¤ï¼‰';
```

#### ä¸è½¯åˆ é™¤ç‰ˆæœ¬çš„åŒºåˆ«
1. **ç§»é™¤deletedå­—æ®µ**: ä¸å†ä½¿ç”¨è½¯åˆ é™¤æ ‡è®°
2. **ç®€åŒ–å”¯ä¸€çº¦æŸ**: `uk_teacher_student` ä¸å†åŒ…å«deletedå­—æ®µ
3. **ä¼˜åŒ–ç´¢å¼•ç»“æ„**: ç§»é™¤deletedç›¸å…³çš„å¤åˆç´¢å¼•
4. **çº§è”åˆ é™¤**: ç”¨æˆ·åˆ é™¤æ—¶è‡ªåŠ¨æ¸…ç†å…³ç³»è®°å½•

### 9.8 å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

#### åˆ›å»ºå¸ˆç”Ÿå…³ç³»
```bash
# å»ºç«‹åˆ˜ç§€ç£Šå¯¼å¸ˆï¼ˆID=38ï¼‰ä¸æé‡‘å³°å­¦ç”Ÿï¼ˆID=29ï¼‰çš„å¸ˆç”Ÿå…³ç³»
POST /lab/users/relationships
Content-Type: application/json
Authorization: Bearer <token>

{
  "teacherId": 38,
  "studentId": 29,
  "relationshipType": 1,
  "startDate": "2025-09-11",
  "remark": "æµ‹è¯•å¸ˆç”Ÿå…³ç³»-åˆ˜ç§€ç£Šå¯¼å¸ˆæŒ‡å¯¼æé‡‘å³°"
}

# å“åº”ç¤ºä¾‹
{
  "code": 0,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": 2
}
```

#### æŸ¥è¯¢å¯¼å¸ˆçš„å­¦ç”Ÿ
```bash
# æŸ¥è¯¢åˆ˜ç§€ç£Šå¯¼å¸ˆï¼ˆID=38ï¼‰çš„æ‰€æœ‰å­¦ç”Ÿ
GET /lab/users/relationships/teacher/38/students
Authorization: Bearer <token>

# æŸ¥è¯¢æ´»è·ƒå­¦ç”Ÿ
GET /lab/users/relationships/teacher/38/students?status=1
Authorization: Bearer <token>
```

#### æŸ¥è¯¢å­¦ç”Ÿçš„å¯¼å¸ˆ
```bash
# æŸ¥è¯¢æé‡‘å³°å­¦ç”Ÿï¼ˆID=29ï¼‰çš„å¯¼å¸ˆ
GET /lab/users/relationships/student/29/supervisor
Authorization: Bearer <token>

# æŸ¥è¯¢æ´»è·ƒå¯¼å¸ˆ
GET /lab/users/relationships/student/29/supervisor?status=1
Authorization: Bearer <token>
```

#### è§£é™¤å¸ˆç”Ÿå…³ç³»ï¼ˆç¡¬åˆ é™¤ï¼‰
```bash
# âš ï¸ æ°¸ä¹…åˆ é™¤åˆ˜ç§€ç£Šå¯¼å¸ˆï¼ˆID=38ï¼‰ä¸æé‡‘å³°å­¦ç”Ÿï¼ˆID=29ï¼‰çš„å¸ˆç”Ÿå…³ç³»
DELETE /lab/users/relationships/teacher/38/student/29
Authorization: Bearer <token>

# å“åº”ç¤ºä¾‹
{
  "code": 0,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": null
}
```

#### å¿«æ·æ·»åŠ å­¦ç”Ÿ
```bash
# å¿«æ·æ–¹å¼ä¸ºä¾¯å®ˆç’å¯¼å¸ˆï¼ˆID=26ï¼‰æ·»åŠ è¢é¹è¾‰å­¦ç”Ÿï¼ˆID=28ï¼‰
POST /lab/users/relationships/teacher/26/student/28
Authorization: Bearer <token>
Content-Type: application/x-www-form-urlencoded

remark=å¿«æ·æ·»åŠ -ä¾¯å®ˆç’å¯¼å¸ˆæŒ‡å¯¼è¢é¹è¾‰
```

---
