# DSCILab æ•°æ®åº“ç»“æž„åˆ†æžæŠ¥å‘Š

## ðŸ“Š æ•°æ®åº“æ¦‚è§ˆ

**æ•°æ®åº“åç§°**: `web`  
**è¡¨æ€»æ•°**: 21ä¸ªè¡¨  
**æ•°æ®åº“ç±»åž‹**: MySQL 8.0  

## ðŸ“‹ è¡¨åˆ†ç±»å’Œæ•°æ®ç»Ÿè®¡

### ðŸ§ª å®žéªŒå®¤ä¸šåŠ¡è¡¨ (Lab Tables)

| è¡¨å | è®°å½•æ•° | ç”¨é€” | çŠ¶æ€ |
|------|--------|------|------|
| `lab_activity` | 0 | å®žéªŒå®¤æ´»åŠ¨ | ç©ºè¡¨ |
| `lab_fund` | 6 | ç§‘ç ”åŸºé‡‘é¡¹ç›® | æœ‰æ•°æ® |
| `lab_fundamount` | 0 | åŸºé‡‘é‡‘é¢æ˜Žç»† | ç©ºè¡¨ |
| `lab_member` | 22 | å®žéªŒå®¤æˆå‘˜ | æœ‰æ•°æ® |
| `lab_paper` | 6 | å­¦æœ¯è®ºæ–‡ | æœ‰æ•°æ® |
| `lab_type` | 28 | ç±»åž‹å­—å…¸è¡¨ | æœ‰æ•°æ® |

### ðŸ”— å…³ç³»è¡¨ (Relationship Tables)

| è¡¨å | è®°å½•æ•° | ç”¨é€” | çŠ¶æ€ |
|------|--------|------|------|
| `rs_fund_paper` | 2 | åŸºé‡‘-è®ºæ–‡å…³è” | æœ‰æ•°æ® |
| `rs_member_fund` | 6 | æˆå‘˜-åŸºé‡‘å…³è” | æœ‰æ•°æ® |
| `rs_member_paper` | 9 | æˆå‘˜-è®ºæ–‡å…³è” | æœ‰æ•°æ® |

### âš™ï¸ ç³»ç»Ÿç®¡ç†è¡¨ (System Tables)

| è¡¨å | è®°å½•æ•° | ç”¨é€” | çŠ¶æ€ |
|------|--------|------|------|
| `sys_user` | 53 | ç³»ç»Ÿç”¨æˆ· | æœ‰æ•°æ® |
| `sys_role` | 5 | ç”¨æˆ·è§’è‰² | æœ‰æ•°æ® |
| `sys_menu` | 65 | ç³»ç»Ÿèœå• | æœ‰æ•°æ® |
| `sys_dept` | 11 | éƒ¨é—¨ä¿¡æ¯ | æœ‰æ•°æ® |
| `sys_config` | - | ç³»ç»Ÿé…ç½® | - |
| `sys_login_info` | - | ç™»å½•æ—¥å¿— | - |
| `sys_notice` | - | ç³»ç»Ÿå…¬å‘Š | - |
| `sys_operation_log` | - | æ“ä½œæ—¥å¿— | - |
| `sys_post` | - | èŒä½ä¿¡æ¯ | - |
| `sys_role_menu` | - | è§’è‰²èœå•å…³è” | - |
| `sys_user_type_config` | - | ç”¨æˆ·ç±»åž‹é…ç½® | - |

## ðŸ” è¯¦ç»†è¡¨ç»“æž„åˆ†æž

### 1. lab_member (å®žéªŒå®¤æˆå‘˜è¡¨)

**è¡¨ç»“æž„**:
```sql
CREATE TABLE lab_member (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,           -- å§“å
    byname VARCHAR(255) NOT NULL UNIQUE,  -- è‹±æ–‡å/åˆ«å
    email VARCHAR(255),                   -- é‚®ç®±
    resume VARCHAR(255),                  -- ç®€åŽ†
    is_off BIT(1),                       -- æ˜¯å¦ç¦»èŒ
    type INT UNSIGNED NOT NULL,           -- æˆå‘˜ç±»åž‹(å…³è”lab_type)
    join_year YEAR                        -- åŠ å…¥å¹´ä»½
);
```

**æ•°æ®ç‰¹ç‚¹**:
- å…±22åæˆå‘˜
- åŒ…å«ä¸­æ–‡å§“åå’Œè‹±æ–‡åˆ«å
- æˆå‘˜ç±»åž‹é€šè¿‡typeå­—æ®µå…³è”lab_typeè¡¨
- æ”¯æŒç¦»èŒçŠ¶æ€ç®¡ç†

### 2. lab_type (ç±»åž‹å­—å…¸è¡¨)

**è¡¨ç»“æž„**:
```sql
CREATE TABLE lab_type (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    field VARCHAR(255) NOT NULL,         -- å­—æ®µç±»åž‹
    name_cn VARCHAR(255) NOT NULL,       -- ä¸­æ–‡åç§°
    name_en VARCHAR(255),                -- è‹±æ–‡åç§°
    order INT UNSIGNED NOT NULL DEFAULT 63  -- æŽ’åº
);
```

**æ•°æ®åˆ†ç±»**:
- `MEMBERTYPE`: æˆå‘˜ç±»åž‹ (æ•™æŽˆã€å‰¯æ•™æŽˆã€åšå£«ç”Ÿç­‰)
- `FUNDTYPE`: åŸºé‡‘ç±»åž‹ (å›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘ç­‰)
- `PAPERTYPE`: è®ºæ–‡ç±»åž‹ (æœŸåˆŠè®ºæ–‡ã€ä¼šè®®è®ºæ–‡)
- `DEVICETYPE`: è®¾å¤‡ç±»åž‹

### 3. lab_fund (ç§‘ç ”åŸºé‡‘è¡¨)

**è¡¨ç»“æž„**:
```sql
CREATE TABLE lab_fund (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title_cn VARCHAR(255),               -- ä¸­æ–‡æ ‡é¢˜
    title_en VARCHAR(255),               -- è‹±æ–‡æ ‡é¢˜
    number VARCHAR(255),                 -- é¡¹ç›®ç¼–å·
    type INT UNSIGNED NOT NULL,          -- åŸºé‡‘ç±»åž‹
    supporter VARCHAR(255) NOT NULL,     -- è´Ÿè´£äºº
    start_date DATE NOT NULL,            -- å¼€å§‹æ—¥æœŸ
    end_date DATE NOT NULL,              -- ç»“æŸæ—¥æœŸ
    total_amount VARCHAR(255) NOT NULL,  -- æ€»é‡‘é¢
    support_cn VARCHAR(255),             -- ä¸­æ–‡èµ„åŠ©æœºæž„
    support_en VARCHAR(255),             -- è‹±æ–‡èµ„åŠ©æœºæž„
    desc VARCHAR(255)                    -- æè¿°
);
```

**æ•°æ®ç‰¹ç‚¹**:
- 6ä¸ªåŸºé‡‘é¡¹ç›®
- é‡‘é¢å•ä½ä¸ºä¸‡å…ƒ
- åŒ…å«å›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘ã€çœçº§åŸºé‡‘ç­‰

### 4. lab_paper (å­¦æœ¯è®ºæ–‡è¡¨)

**è¡¨ç»“æž„**:
```sql
CREATE TABLE lab_paper (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    type INT NOT NULL,                   -- è®ºæ–‡ç±»åž‹
    title VARCHAR(255) NOT NULL,         -- æ ‡é¢˜
    author VARCHAR(255) NOT NULL,        -- ä½œè€…
    date DATE NOT NULL,                  -- å‘è¡¨æ—¥æœŸ
    publication VARCHAR(255) NOT NULL,   -- å‘è¡¨æœŸåˆŠ/ä¼šè®®
    conf VARCHAR(255),                   -- ä¼šè®®åç§°
    number VARCHAR(255),                 -- æœŸåˆŠå·å·
    place VARCHAR(255),                  -- å‘è¡¨åœ°ç‚¹
    publisher VARCHAR(255),              -- å‡ºç‰ˆå•†
    page VARCHAR(255),                   -- é¡µç 
    doi VARCHAR(255),                    -- DOI
    url VARCHAR(255),                    -- URLé“¾æŽ¥
    desc VARCHAR(255)                    -- æè¿°
);
```

**æ•°æ®ç‰¹ç‚¹**:
- 6ç¯‡è®ºæ–‡
- åŒ…å«ä¸­è‹±æ–‡è®ºæ–‡
- æ¶µç›–æœŸåˆŠå’Œä¼šè®®è®ºæ–‡

## ðŸ” ç³»ç»Ÿç”¨æˆ·æ•°æ®åˆ†æž

### sys_user (ç³»ç»Ÿç”¨æˆ·è¡¨)
- **æ€»ç”¨æˆ·æ•°**: 53ä¸ªç”¨æˆ·
- **ç”¨æˆ·ç±»åž‹**: 
  - `1`: æ•™å¸ˆ (teacher)
  - `3`: å­¦ç”Ÿ (student)
- **è§’è‰²åˆ†é…**: é€šè¿‡role_idå…³è”sys_roleè¡¨
- **æ‰©å±•å­—æ®µ**: åŒ…å«å­¦å·ã€èº«ä»½ã€å­¦æœ¯çŠ¶æ€ã€å…¥å­¦å¹´ä»½ç­‰

### sys_role (ç³»ç»Ÿè§’è‰²è¡¨)
- **è§’è‰²åˆ—è¡¨**:
  1. è¶…çº§ç®¡ç†å‘˜ (admin) - å…¨éƒ¨æƒé™
  2. å­¦ç”Ÿ (student) - éƒ¨åˆ†æƒé™
  3. æœªä½¿ç”¨ (unused) - å·²åˆ é™¤
  4. æ•™å¸ˆ (teacher) - æ•™å¸ˆæƒé™
  5. è®¿å®¢ (visitor) - è®¿é—®æƒé™

### sys_menu (ç³»ç»Ÿèœå•è¡¨)
- **èœå•æ€»æ•°**: 65ä¸ªèœå•é¡¹
- **èœå•ç»“æž„**: æ ‘å½¢ç»“æž„ï¼Œæ”¯æŒå¤šçº§èœå•
- **æƒé™æŽ§åˆ¶**: é€šè¿‡permissionå­—æ®µæŽ§åˆ¶è®¿é—®æƒé™
- **å…ƒæ•°æ®**: meta_infoå­—æ®µå­˜å‚¨èœå•å…ƒä¿¡æ¯

## ðŸ”— å…³ç³»è¡¨åˆ†æž

### 1. rs_member_fund (æˆå‘˜-åŸºé‡‘å…³è”)
- è®°å½•æˆå‘˜å‚ä¸Žçš„åŸºé‡‘é¡¹ç›®
- 6æ¡å…³è”è®°å½•

### 2. rs_member_paper (æˆå‘˜-è®ºæ–‡å…³è”)
- è®°å½•æˆå‘˜å‘è¡¨çš„è®ºæ–‡
- 9æ¡å…³è”è®°å½•

### 3. rs_fund_paper (åŸºé‡‘-è®ºæ–‡å…³è”)
- è®°å½•åŸºé‡‘èµ„åŠ©çš„è®ºæ–‡
- 2æ¡å…³è”è®°å½•

## ðŸ” æ•°æ®è´¨é‡é—®é¢˜

### 1. å­—ç¬¦ç¼–ç é—®é¢˜
**é—®é¢˜**: ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºä¸ºä¹±ç  (å¦‚: `??`, `???`)
**åŽŸå› **: å¯èƒ½æ˜¯å®¢æˆ·ç«¯è¿žæŽ¥å­—ç¬¦é›†é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
```sql
-- è®¾ç½®å®¢æˆ·ç«¯å­—ç¬¦é›†
SET NAMES utf8mb4;

-- æˆ–åœ¨è¿žæŽ¥æ—¶æŒ‡å®šå­—ç¬¦é›†
mysql -uroot -p12345 --default-character-set=utf8mb4
```

### 2. æ•°æ®å®Œæ•´æ€§
**é—®é¢˜**: éƒ¨åˆ†å­—æ®µæ•°æ®ä¸å®Œæ•´
- lab_memberè¡¨ä¸­emailã€resumeå­—æ®µå¤šä¸ºç©º
- lab_paperè¡¨ä¸­doiã€urlå­—æ®µç¼ºå¤±
- éƒ¨åˆ†è¡¨å®Œå…¨ä¸ºç©º(lab_activity, lab_fundamount)

## ðŸ“Š ä¸šåŠ¡æ•°æ®ç»Ÿè®¡

### å®žéªŒå®¤æˆå‘˜åˆ†å¸ƒ
```sql
-- æŒ‰ç±»åž‹ç»Ÿè®¡æˆå‘˜æ•°é‡
SELECT lt.name_cn as æˆå‘˜ç±»åž‹, COUNT(*) as äººæ•°
FROM lab_member lm 
JOIN lab_type lt ON lm.type = lt.id 
WHERE lt.field = 'MEMBERTYPE'
GROUP BY lm.type, lt.name_cn;
```

### ç§‘ç ”æˆæžœç»Ÿè®¡
- **åŸºé‡‘é¡¹ç›®**: 6ä¸ªé¡¹ç›®ï¼Œæ€»é‡‘é¢çº¦20.4ä¸‡å…ƒ
- **å­¦æœ¯è®ºæ–‡**: 6ç¯‡è®ºæ–‡ï¼ŒåŒ…å«æœŸåˆŠå’Œä¼šè®®è®ºæ–‡
- **æˆå‘˜å‚ä¸Ž**: å¹³å‡æ¯ä¸ªæˆå‘˜å‚ä¸Ž1.4ä¸ªé¡¹ç›®

### å…³è”å…³ç³»åˆ†æž
- **æˆå‘˜-åŸºé‡‘å…³è”**: 6æ¡è®°å½•ï¼Œæ˜¾ç¤ºé¡¹ç›®å‚ä¸Žæƒ…å†µ
- **æˆå‘˜-è®ºæ–‡å…³è”**: 9æ¡è®°å½•ï¼Œæ˜¾ç¤ºå­¦æœ¯è´¡çŒ®
- **åŸºé‡‘-è®ºæ–‡å…³è”**: 2æ¡è®°å½•ï¼Œæ˜¾ç¤ºé¡¹ç›®äº§å‡º

## ðŸš€ ç³»ç»ŸåŠŸèƒ½æŽ¨æ–­

åŸºäºŽæ•°æ®åº“ç»“æž„ï¼Œè¯¥ç³»ç»Ÿä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

### 1. å®žéªŒå®¤ç®¡ç†
- æˆå‘˜ä¿¡æ¯ç®¡ç†
- æˆå‘˜ç±»åž‹åˆ†ç±»
- ç¦»èŒçŠ¶æ€è·Ÿè¸ª

### 2. ç§‘ç ”é¡¹ç›®ç®¡ç†
- åŸºé‡‘é¡¹ç›®ç”³è¯·å’Œè·Ÿè¸ª
- é¡¹ç›®è¿›åº¦ç®¡ç†
- èµ„é‡‘ä½¿ç”¨ç›‘æŽ§

### 3. å­¦æœ¯æˆæžœç®¡ç†
- è®ºæ–‡å‘è¡¨è®°å½•
- æˆæžœç»Ÿè®¡åˆ†æž
- å­¦æœ¯å½±å“åŠ›è¯„ä¼°

### 4. ç³»ç»Ÿæƒé™ç®¡ç†
- ç”¨æˆ·è§’è‰²åˆ†é…
- èœå•æƒé™æŽ§åˆ¶
- æ“ä½œæ—¥å¿—è®°å½•

## ðŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®å®Œå–„
```sql
-- è¡¥å……æˆå‘˜é‚®ç®±ä¿¡æ¯
UPDATE lab_member SET email = CONCAT(byname, '@university.edu') 
WHERE email IS NULL;

-- å®Œå–„è®ºæ–‡DOIä¿¡æ¯
-- éœ€è¦æ‰‹åŠ¨æ”¶é›†å’Œå½•å…¥
```

### 2. æ€§èƒ½ä¼˜åŒ–
```sql
-- æ·»åŠ å¸¸ç”¨æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_member_join_year ON lab_member(join_year);
CREATE INDEX idx_fund_date ON lab_fund(start_date, end_date);
CREATE INDEX idx_paper_type_date ON lab_paper(type, date);
```

### 3. æ•°æ®çº¦æŸ
```sql
-- æ·»åŠ æ•°æ®éªŒè¯çº¦æŸ
ALTER TABLE lab_member 
ADD CONSTRAINT chk_join_year 
CHECK (join_year >= 1990 AND join_year <= YEAR(CURDATE()));
```

---

**æ€»ç»“**: 
1. **æ•°æ®åº“è®¾è®¡**: ç»“æž„åˆç†ï¼Œä¸šåŠ¡é€»è¾‘æ¸…æ™°ï¼Œæ”¯æŒå®žéªŒå®¤å…¨é¢ç®¡ç†
2. **æ•°æ®è´¨é‡**: å­˜åœ¨å­—ç¬¦ç¼–ç å’Œæ•°æ®å®Œæ•´æ€§é—®é¢˜ï¼Œéœ€è¦ä¿®å¤
3. **åŠŸèƒ½å®Œæ•´**: æ¶µç›–æˆå‘˜ã€é¡¹ç›®ã€æˆæžœã€æƒé™ç­‰æ ¸å¿ƒåŠŸèƒ½
4. **æ‰©å±•æ€§**: è‰¯å¥½çš„è¡¨ç»“æž„è®¾è®¡ï¼Œä¾¿äºŽåŽç»­åŠŸèƒ½æ‰©å±•

å»ºè®®ä¼˜å…ˆè§£å†³å­—ç¬¦ç¼–ç é—®é¢˜ï¼Œç„¶åŽé€æ­¥å®Œå–„æ•°æ®å†…å®¹ï¼Œæœ€åŽè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚
